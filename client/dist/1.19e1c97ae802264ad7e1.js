(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=()=>"https://portfolio-mick-server.herokuapp.com"},108:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return d}));var o=n(107);const a=Object(o.a)();const c=async e=>(console.log(JSON.stringify(e)),await fetch(a+"/users",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>(localStorage.setItem("authToken",e.token),e))),i=async e=>{console.log(e);let t=await fetch(a+"/auth/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>(localStorage.setItem("authToken",e.token),e));return console.log(t),t},s=async()=>{if(localStorage.getItem("authToken")){return await fetch(a+"/auth/verify",{method:"get",headers:(e={"Content-Type":"application/json"},localStorage.authToken?{...e,Authorization:`Bearer ${localStorage.authToken}`}:e)}).then(e=>e.json()).then(e=>e)}var e;return!1},d=async()=>(localStorage.removeItem("authToken"),{"Content-Type":"application/json"},"logged out")},110:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return d}));var o=n(107);const a=Object(o.a)();let c=async()=>await fetch(`${a}/technologies`).then(e=>e.json()).then(e=>e),i=async e=>await fetch(`${a}/technologies`,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e);const s=async(e,t)=>{await fetch(`${a}/technologies/${t}`,{method:"put",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e)},d=async e=>{await fetch(`${a}/technologies/${e}`,{method:"delete",headers:{"Content-Type":"application/json"}}).then(e=>e).then(e=>e)}},111:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return d}));var o=n(107);const a=Object(o.a)();let c=async()=>await fetch(`${a}/projects`).then(e=>e.json()).then(e=>e);const i=async e=>{const t=await fetch(`${a}/projects`,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e);console.log(t)},s=async(e,t)=>{await fetch(`${a}/projects/${t}`,{method:"put",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e)},d=async e=>{const t=await fetch(`${a}/projects/${e}`,{method:"delete",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e);console.log(t)}},114:function(e,t,n){"use strict";n.r(t),n.d(t,"Projects",(function(){return h}));var o=n(0),a=n(108),c=n(109),i=n(4),s=n(111),d=n(3),l=n(117);n(118);const r=e=>{for(;e.childNodes.length;)e.removeChild(e.lastChild)};async function h(){const e=Object(o.e)(".scrollable-content");r(e),e.appendChild(Object(o.c)("div","loading")).innerHTML="loading...";const t=await Object(a.d)(),n=await Object(s.c)();r(e);const p=e.clientWidth;if(n.forEach(async(n,a)=>{const i=e.appendChild(Object(o.c)("div","project-wrap")),r=i.appendChild(Object(c.a)(`src/img/${n.img_url}`,n.name,!0,n.site_url,n.build_date));let u="false",f=Object(o.c)("div","link-modal"),j=Object(o.f)(".img-wrapper"),b=Object(o.f)(".inner-img-wrap"),m=Object(o.c)("div","tech-icons");n.technologies.forEach(e=>{m.appendChild(Object(o.c)("img","tech-icon")).src=`src/img/${e.icon_url}`});let g=Object(o.c)("div","description");if(g.innerHTML=n.description,p<900?(f.appendChild(m),f.appendChild(g)):(f.appendChild(g),f.appendChild(m)),f.appendChild(Object(o.c)("div","link-modal-icons")).innerHTML=`<div><a href=${n.site_url} target='_blank'><i class="fas fa-home fa-fw"></i></a>\n    <p class='home-tool-tip'>website</p></div>\n\n    <div><a href=${n.github_url} target='_blank'><i class="fab fa-github"></i></a>\n    <p class='github-tool-tip'>github</p></div>`,j[a].addEventListener("click",async()=>{if("true"===u)u="false",b[a].classList.add("close-curtain"),b[a].classList.remove("open-curtain"),b[a].lastChild.remove(),j[a].lastChild.remove(),j[a].style.width="80%",j[a].style.padding="6%",j[a].style.margin="0",i.style.margin="0 10% 3% 10%",b[a].style.width="100%",i.classList.remove("project-wrap-click");else if("false"===u){console.log("true"),u="true",b[a].classList.add("open-curtain"),b[a].classList.remove("close-curtain"),j[a].appendChild(f),i.style.margin="0 5% 5% 5%",p<900?(j[a].style.flexDirection="column",f.style.width="90%",m.style.width="80%",f.style.marginTop="5%",f.style.background="rgb(240, 253, 253)"):(j[a].style.width="90%",j[a].style.padding="2%",j[a].style.margin="0 auto",b[a].style.width="99%",b[a].style.height="99%"),p<900?(console.log("900-"),r.appendChild(m)):(console.log("900+"),b[a].appendChild(m)),console.log(r),j[a].style.setProperty("--animation","animate-img-wrapper 1.5s linear forwards"),i.classList.add("project-wrap-click")}}),t&&t.isAdmin){const e=Object(o.c)("div","edit-project-wrapper"),t=Object(d.a)("show-edit-button","submit","update");t.addEventListener("click",()=>{console.log(i.lastChild.className),"edit-project-form"!==i.lastChild.className?Object(l.EditProject)(i,n):i.lastChild.remove()}),e.appendChild(t);const a=Object(d.a)("delete-project","submit","delete");a.addEventListener("click",async()=>{let e=confirm(`Are you sure you want to delete ${n.name}?`);e&&await Object(s.b)(n.id),e&&await h()}),e.appendChild(a),i.appendChild(e)}}),t&&t.isAdmin){let t=Object(d.a)("show-add-form","submit","add project");t.addEventListener("click",()=>{console.log(e.lastChild.previousSibling.className),"show-add-form"===e.lastChild.previousSibling.className?Object(l.EditProject)(e,n[0],"addProject"):e.lastChild.remove()}),Object(o.b)(e,t)}e.appendChild(Object(i.a)())}},117:function(e,t,n){"use strict";n.r(t),n.d(t,"EditProject",(function(){return d}));var o=n(3),a=n(110),c=n(111),i=n(114),s=n(0);const d=async(e,t,n)=>{if(console.log("add",n),"addProject"===n)for(let e in t)t[e]="";let d={},l=e=>{d[e.target.name]=e.target.value},r=Object(o.c)("edit-project-form"),h=Object(s.c)("div","edit-form-inputs");r.appendChild(h),Object.keys(t).forEach(e=>{if("id"!==e&&"technologies"!==e&&"created_at"!==e&&"updated_at"!==e){d[e]=t[e];const a=Object(o.d)({className:"edit-form-input",name:e,type:"text",value:"addProject"===n?"":d[e],placeholder:e,handleChange:l});h.appendChild(a)}});const p=Object(s.c)("div","edit-form-checkboxes");r.appendChild(p),(await Object(a.c)()).map(e=>{let a;void 0===n&&t.technologies.forEach(t=>{e.name===t.name&&(console.log(e.name,t.name),a="checked")});let c=Object(o.b)({className:"edit-project-chkbox",name:e.name,id:e.name,value:e.id,checked:"addProject"===n?"":a});p.appendChild(c),p.appendChild(Object(o.e)("tech-box-label",e.name,"tech-box"))}),r.appendChild(Object(o.a)("edit-project-button","submit","addProject"===n?"add new project":"submit")),Object(s.b)(e,r),r.addEventListener("submit",async e=>{e.preventDefault();const o=document.querySelectorAll("input[type=checkbox]:checked");d.technologies=[],o.forEach(e=>{d.technologies.push(e.value)}),"addProject"===n?await Object(c.a)(d):await Object(c.d)(d,t.id),await Object(i.Projects)()})}},118:function(e,t,n){var o=n(1),a=n(119);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var c={insert:"head",singleton:!1},i=(o(a,c),a.locals?a.locals:{});e.exports=i},119:function(e,t,n){}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9TZXJ2aWNlcy9CYXNlVXJsLmpzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1NlcnZpY2VzL0FwaUF1dGguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvU2VydmljZXMvQXBpVGVjaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9TZXJ2aWNlcy9BcGlQcm9qZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1Byb2plY3RzL1Byb2plY3RzLmpzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1Byb2plY3RzL0VkaXRQcm9qZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1Byb2plY3RzL3Byb2plY3RzLnNjc3MiXSwibmFtZXMiOlsiQmFzZVVybCIsImJhc2VVcmwiLCJzaWduVXAiLCJhc3luYyIsImJvZHkiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInRoZW4iLCJqc29uIiwiZGF0YSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJ0b2tlbiIsImxvZ2luIiwicmVzIiwidmVyaWZ5IiwiZ2V0SXRlbSIsImF1dGhUb2tlbiIsIkF1dGhvcml6YXRpb24iLCJsb2dvdXQiLCJyZW1vdmVJdGVtIiwiZ2V0VGVjaG5vbG9naWVzIiwiYW5zIiwiY3JlYXRlVGVjaG5vbG9neSIsInVwZGF0ZVRlY2hub2xvZ3kiLCJpZCIsImRlbGV0ZVRlY2hub2xvZ3kiLCJnZXRQcm9qZWN0cyIsImFkZFByb2plY3QiLCJ1cGRhdGVQcm9qZWN0IiwiZGVsZXRlUHJvamVjdCIsImNsZWFyUGFnZSIsImVsZW1lbnQiLCJjaGlsZE5vZGVzIiwibGVuZ3RoIiwicmVtb3ZlQ2hpbGQiLCJsYXN0Q2hpbGQiLCJQcm9qZWN0cyIsIm1haW5Db250ZW50IiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJ1c2VyIiwicmVzcCIsImNvbnRhaW5lcldpZHRoIiwiY2xpZW50V2lkdGgiLCJmb3JFYWNoIiwicHJvamVjdCIsImluZGV4IiwicHJvamVjdFdyYXAiLCJpbWFnZSIsImltZ191cmwiLCJuYW1lIiwic2l0ZV91cmwiLCJidWlsZF9kYXRlIiwiYm9vbCIsImxpbmtNb2RhbCIsImltZ1dyYXBwZXIiLCJpbm5lckltZ1dyYXAiLCJ0ZWNoSWNvbnMiLCJ0ZWNobm9sb2dpZXMiLCJpY29uIiwic3JjIiwiaWNvbl91cmwiLCJkZXNjcmlwdGlvbiIsImdpdGh1Yl91cmwiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic3R5bGUiLCJ3aWR0aCIsInBhZGRpbmciLCJtYXJnaW4iLCJmbGV4RGlyZWN0aW9uIiwibWFyZ2luVG9wIiwiYmFja2dyb3VuZCIsImhlaWdodCIsInNldFByb3BlcnR5IiwiaXNBZG1pbiIsImVkaXRQcm9qZWN0V3JhcHBlciIsImVkaXRCdXR0b24iLCJjbGFzc05hbWUiLCJkZWxldGVCdXR0b24iLCJhbnN3ZXIiLCJjb25maXJtIiwiYWRkQnRuIiwicHJldmlvdXNTaWJsaW5nIiwiRWRpdFByb2plY3QiLCJpdGVtIiwibmV3UHJvamVjdCIsImhhbmRsZUNoYW5nZSIsImUiLCJ0YXJnZXQiLCJ2YWx1ZSIsImZvcm0iLCJpbnB1dHMiLCJPYmplY3QiLCJrZXlzIiwia2V5IiwiaW5wdXQiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJjaGVja3MiLCJtYXAiLCJ0ZWNobm9sb2d5IiwiY2hlY2tlZCIsInVuZGVmaW5lZCIsInByb2plY3RUZWNobm9sb2d5IiwiYngiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImNoZWNrYm94ZXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJib3giLCJwdXNoIiwiYXBpIiwiY29udGVudCIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwibW9kdWxlIiwiaSIsIm9wdGlvbnMiLCJleHBvcnRlZCIsImxvY2FscyIs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QUNFLHNCQUNBLFNBQ2UsZUFBZlgsRUFBOEIsa0JBQW9CLFdBS3RELFlBQUdvQixFQUFhOEMsR0FNaEJBLEVBQUs3QixpQkFBaUIsU0FBVW5FLE1BQU8rRyxJQUNyQ0EsRUFBSUMsaUJBRUosTUFBTUMsRUFBYUMsU0FBU0MsaUJBQWlCLGdDQUM3Q3hCLEVBQVc5QixhQUFlLEdBQzFCb0QsRUFBV2xFLFFBQVNxRSxJQUNsQnpCLEVBQVc5QixhQUFhd0QsS0FBS0QsRUFBSXJCLFNBRXBCLGVBQWZqRSxRQUNVLFlBQWM2RCxTQUNkLFlBQWNBLEVBQVkzQyxFQUFRckIsVUFFdEMseUIsb0JDMUdWLElBQUkyRixFQUFNLEVBQVEsR0FDRkMsRUFBVSxFQUFRLEtBSUMsaUJBRnZCQSxFQUFVQSxFQUFRQyxXQUFhRCxFQUFRRSxRQUFVRixLQUcvQ0EsRUFBVSxDQUFDLENBQUNHLEVBQU9DLEVBQUlKLEVBQVMsTUFHOUMsSUFBSUssRUFBVSxDQUVkLE9BQWlCLE9BQ2pCLFdBQW9CLEdBSWhCQyxHQUZTUCxFQUFJQyxFQUFTSyxHQUVYTCxFQUFRTyxPQUFTUCxFQUFRTyxPQUFTLElBSWpESixFQUFPSyxRQUFVRixHIiwiZmlsZSI6IjEuMTllMWM5N2FlODAyMjY0YWQ3ZTEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCBjb25zdCBCYXNlVXJsID0gKCkgPT4ge1xuXG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnaHR0cHM6Ly9wb3J0Zm9saW8tbWljay1zZXJ2ZXIuaGVyb2t1YXBwLmNvbScgOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwJ1xuXG59IiwiaW1wb3J0IHsgQmFzZVVybCB9IGZyb20gXCIuL0Jhc2VVcmwuanNcIlxuY29uc3QgYmFzZVVybCA9IEJhc2VVcmwoKVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0SGVhZGVycyhoZWFkZXJzKSB7XG4gIGlmIChsb2NhbFN0b3JhZ2UuYXV0aFRva2VuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmhlYWRlcnMsXG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7bG9jYWxTdG9yYWdlLmF1dGhUb2tlbn1gLFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaGVhZGVyc1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjbGVhckhlYWRlcnMgPSAoaGVhZGVycykgPT4ge1xuICByZXR1cm4ge1xuICAgIC4uLmhlYWRlcnMsXG4gICAgQXV0aG9yaXphdGlvbjogbnVsbCxcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc2lnblVwID0gYXN5bmMgKGJvZHkpID0+IHtcbiAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoYm9keSkpXG5cbiAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKGJhc2VVcmwgKyBcIi91c2Vyc1wiLCB7XG4gICAgbWV0aG9kOiBcInBvc3RcIixcbiAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gIH0pXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBqc29uLmpzb24oKVxuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcblxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhdXRoVG9rZW5cIiwgZGF0YS50b2tlbilcblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9KVxuICByZXR1cm4gcmVzXG59XG5cbmV4cG9ydCBjb25zdCBsb2dpbiA9IGFzeW5jIChib2R5KSA9PiB7XG4gIGNvbnNvbGUubG9nKGJvZHkpXG4gIGxldCByZXMgPSBhd2FpdCBmZXRjaChiYXNlVXJsICsgXCIvYXV0aC9sb2dpblwiLCB7XG4gICAgbWV0aG9kOiBcInBvc3RcIixcbiAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gIH0pXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBqc29uLmpzb24oKVxuXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgLy8gY29uc29sZS5sb2coZGF0YSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYXV0aFRva2VuXCIsIGRhdGEudG9rZW4pXG5cblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9KVxuICBjb25zb2xlLmxvZyhyZXMpXG4gIHJldHVybiByZXNcbn1cblxuZXhwb3J0IGNvbnN0IHZlcmlmeSA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF1dGhUb2tlblwiKVxuICAvLyBjb25zb2xlLmxvZyh0b2tlbilcbiAgaWYgKHRva2VuKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYmFzZVVybCArIFwiL2F1dGgvdmVyaWZ5XCIsIHtcbiAgICAgIG1ldGhvZDogXCJnZXRcIixcbiAgICAgIGhlYWRlcnM6IHNldEhlYWRlcnMoe1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgICByZXR1cm4ganNvbi5qc29uKClcbiAgICAgIH0pXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICByZXR1cm4gZGF0YVxuICAgICAgfSlcblxuICAgIHJldHVybiByZXNcbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFVzZXIgPSBhc3luYyAoKSA9PiB7XG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF1dGhUb2tlblwiKSkge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiaGVyZVwiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF1dGhUb2tlblwiKSlcbiAgICBsZXQgdXNlciA9IGF3YWl0IHZlcmlmeSgpXG4gICAgY29uc29sZS5sb2codXNlcilcbiAgICBpZiAoIXVzZXIuZXJyb3JzKSB7XG4gICAgICAvLyBsb2dpbkJ1dHRvbi5pbm5lclRleHQgPSBcImxvZ291dFwiXG4gICAgICAvLyBsb2dnZWRJbiA9IHRydWVcbiAgICAgIHJldHVybiB1c2VyXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGxvZ2luQnV0dG9uLmlubmVyVGV4dCA9IFwibG9naW5cIlxuXG4gICAgLy8gbG9nZ2VkSW4gPSBmYWxzZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGNvbnNvbGUubG9nKGxvZ2dlZEluKVxufVxuXG5leHBvcnQgY29uc3QgbG9nb3V0ID0gYXN5bmMgKCkgPT4ge1xuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImF1dGhUb2tlblwiKVxuICBjbGVhckhlYWRlcnMoe1xuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9KVxuICByZXR1cm4gXCJsb2dnZWQgb3V0XCJcbn1cbiIsImltcG9ydCB7IEJhc2VVcmwgfSBmcm9tICcuL0Jhc2VVcmwuanMnXG5jb25zdCBiYXNlVXJsID0gQmFzZVVybCgpXG5cblxuXG5cbmV4cG9ydCBsZXQgZ2V0VGVjaG5vbG9naWVzID0gYXN5bmMgKCkgPT4ge1xuICBsZXQgcmVzdWx0cyA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9L3RlY2hub2xvZ2llc2ApXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuXG4gICAgICByZXR1cm4gcmVzLmpzb24oKVxuICAgIH0pXG4gICAgLnRoZW4oKGFucykgPT4ge1xuICAgICAgcmV0dXJuIGFuc1xuICAgIH0pXG5cbiAgcmV0dXJuIHJlc3VsdHNcbn1cblxuXG5leHBvcnQgbGV0IGNyZWF0ZVRlY2hub2xvZ3kgPSBhc3luYyAoYm9keSkgPT4ge1xuICBsZXQgcmVzdWx0cyA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9L3RlY2hub2xvZ2llc2AsIHtcbiAgICBtZXRob2Q6IGBwb3N0YCxcbiAgICBib2R5OkpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30sXG4gIH0pXG4gIC50aGVuKChyZXMpPT57XG4gICAgcmV0dXJuIHJlcy5qc29uKClcbiAgfSlcbiAgLnRoZW4oKGFucyk9PntcbiAgICByZXR1cm4gYW5zXG4gIH0pXG4gIHJldHVybiByZXN1bHRzXG59XG5cblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVRlY2hub2xvZ3kgPSBhc3luYyAoYm9keSwgaWQpID0+IHtcbiAgXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9L3RlY2hub2xvZ2llcy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6IGBwdXRgLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICB9KVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YVxuICAgIH0pXG5cbn1cblxuZXhwb3J0IGNvbnN0IGRlbGV0ZVRlY2hub2xvZ3kgPSBhc3luYyhpZCkgPT4ge1xuICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVybH0vdGVjaG5vbG9naWVzLyR7aWR9YCx7XG4gICAgbWV0aG9kOiBgZGVsZXRlYCxcbiAgICBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ31cbiAgfSlcbiAgLnRoZW4oanNvbj0+e1xuICAgIHJldHVybiBqc29uXG4gIH0pXG4gIC50aGVuKGRhdGE9PntcbiAgICByZXR1cm4gZGF0YVxuICB9KVxufVxuXG4iLCJpbXBvcnQgeyBCYXNlVXJsIH0gZnJvbSAnLi9CYXNlVXJsLmpzJ1xuY29uc3QgYmFzZVVybCA9IEJhc2VVcmwoKVxuXG5cbmV4cG9ydCBsZXQgZ2V0UHJvamVjdHMgPSBhc3luYyAoKSA9PiB7XG4gIGxldCByZXN1bHRzID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVybH0vcHJvamVjdHNgKVxuICAgIC50aGVuKChyZXMpID0+IHtcblxuICAgICAgcmV0dXJuIHJlcy5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChhbnMpID0+IHtcbiAgICAgIHJldHVybiBhbnNcbiAgICB9KVxuXG4gIHJldHVybiByZXN1bHRzXG59XG5cbmV4cG9ydCBsZXQgZ2V0UHJvamVjdCA9IGFzeW5jIChpZCkgPT4ge1xuICBsZXQgcmVzdWx0ID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVybH0vcHJvamVjdHMvJHtpZH1gKVxuICAgIC50aGVuKChyZXMpID0+IHtcblxuICAgICAgcmV0dXJuIHJlcy5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChhbnMpID0+IHtcbiAgICAgIHJldHVybiBhbnNcbiAgICB9KVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuXG5cbmV4cG9ydCBjb25zdCBhZGRQcm9qZWN0ID0gYXN5bmMgKGJvZHkpID0+IHtcbiBcbiBcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVybH0vcHJvamVjdHNgLCB7XG4gICAgbWV0aG9kOiBgcG9zdGAsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gIH0pXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBqc29uLmpzb24oKVxuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSlcbiAgY29uc29sZS5sb2cocmVzKVxufVxuXG5cbmV4cG9ydCBjb25zdCB1cGRhdGVQcm9qZWN0ID0gYXN5bmMgKGJvZHksIGlkKSA9PiB7XG4gIFxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS9wcm9qZWN0cy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6IGBwdXRgLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICB9KVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YVxuICAgIH0pXG5cbn1cbi8vXG5leHBvcnQgY29uc3QgZGVsZXRlUHJvamVjdCA9IGFzeW5jIChpZCkgPT4ge1xuXG5cblxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS9wcm9qZWN0cy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6IGBkZWxldGVgLFxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9XG4gIH0pXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBqc29uLmpzb24oKVxuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSlcbiAgY29uc29sZS5sb2cocmVzKVxufVxuXG5cbmV4cG9ydCBjb25zdCB1cGRhdGVQcm9qZWN0VGVjaG5vbG9naWVzID0gYXN5bmMgKHByb2plY3RfaWQsIGlkKSA9PiB7XG4gIGNvbnNvbGUubG9nKCd1cHQnKVxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS9wcm9qZWN0cy8ke3Byb2plY3RfaWR9L3RlY2hub2xvZ2llcy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6IGBwdXRgLFxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9XG4gIH0pXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBqc29uLmpzb24oKVxuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSlcbiAgY29uc29sZS5sb2cocmVzKVxuXG59IiwiLy8gaW1wb3J0IFwiLi4vU2hhcmVkL0ltYWdlXCJcbmltcG9ydCB7IHFzLCBxc2EsIGNlY2wsIGFjLCBidG4gfSBmcm9tIFwiLi4vSGVscGVycy9kb21IZWxwZXJcIlxuaW1wb3J0IHsgdmVyaWZ5IH0gZnJvbSBcIi4uL1NlcnZpY2VzL0FwaUF1dGguanNcIlxuaW1wb3J0IHsgSW1hZ2UgfSBmcm9tIFwiLi4vU2hhcmVkL0ltYWdlLmpzXCJcbmltcG9ydCB7IEZvb3RlciB9IGZyb20gXCIuLi9Gb290ZXIvRm9vdGVyLmpzXCJcbmltcG9ydCB7XG4gIGdldFByb2plY3RzLFxuICBkZWxldGVQcm9qZWN0LFxuXG59IGZyb20gXCIuLi9TZXJ2aWNlcy9BcGlQcm9qZWN0LmpzXCJcbmltcG9ydCB7IEZvcm0sIElucHV0LCBCdXR0b24sIENoZWNrYm94LCBMYWJlbCB9IGZyb20gXCIuLi9TaGFyZWQvRm9ybS5qc1wiXG5pbXBvcnQgeyBFZGl0UHJvamVjdCB9IGZyb20gXCIuL0VkaXRQcm9qZWN0XCJcbmltcG9ydCBcIi4vcHJvamVjdHMuc2Nzc1wiXG5cbi8qKioqKioqKioqXG4gQ0xFQVIgUEFHRVxuKioqKioqKioqKiovXG5jb25zdCBjbGVhclBhZ2UgPSAoZWxlbWVudCkgPT4ge1xuICB3aGlsZSAoZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5sYXN0Q2hpbGQpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFByb2plY3RzKCkge1xuXG4gIGNvbnN0IG1haW5Db250ZW50ID0gcXMoJy5zY3JvbGxhYmxlLWNvbnRlbnQnKVxuICBjbGVhclBhZ2UobWFpbkNvbnRlbnQpXG4gIGxldCBsb2FkaW5nID0gbWFpbkNvbnRlbnQuYXBwZW5kQ2hpbGQoY2VjbChcImRpdlwiLCBcImxvYWRpbmdcIikpXG4gIGxvYWRpbmcuaW5uZXJIVE1MID0gXCJsb2FkaW5nLi4uXCJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHZlcmlmeSgpXG5cblxuICAvKioqKioqKioqKioqKipcbiAgUkVOREVSIFBST0pFQ1RTXG4gICoqKioqKioqKioqKioqKi9cbiAgY29uc3QgcmVzcCA9IGF3YWl0IGdldFByb2plY3RzKClcbiAgY2xlYXJQYWdlKG1haW5Db250ZW50KVxuXG4gIGNvbnN0IGNvbnRhaW5lcldpZHRoID0gbWFpbkNvbnRlbnQuY2xpZW50V2lkdGhcbiAgcmVzcC5mb3JFYWNoKGFzeW5jIChwcm9qZWN0LCBpbmRleCkgPT4ge1xuXG4gICAgY29uc3QgcHJvamVjdFdyYXAgPSBtYWluQ29udGVudC5hcHBlbmRDaGlsZChjZWNsKFwiZGl2XCIsIFwicHJvamVjdC13cmFwXCIpKVxuICAgIGNvbnN0IGltYWdlID0gcHJvamVjdFdyYXAuYXBwZW5kQ2hpbGQoXG4gICAgICBJbWFnZShgc3JjL2ltZy8ke3Byb2plY3QuaW1nX3VybH1gLCBwcm9qZWN0Lm5hbWUsIHRydWUsIHByb2plY3Quc2l0ZV91cmwsIHByb2plY3QuYnVpbGRfZGF0ZSlcbiAgICApXG4gICBcbiAgICBsZXQgYm9vbCA9IFwiZmFsc2VcIlxuICAgIGxldCBsaW5rTW9kYWwgPSBjZWNsKFwiZGl2XCIsIFwibGluay1tb2RhbFwiKVxuICAgIGxldCBpbWdXcmFwcGVyID0gcXNhKFwiLmltZy13cmFwcGVyXCIpXG4gICAgbGV0IGlubmVySW1nV3JhcCA9IHFzYShcIi5pbm5lci1pbWctd3JhcFwiKVxuICAgIGxldCB0ZWNoSWNvbnMgPSBjZWNsKFwiZGl2XCIsIFwidGVjaC1pY29uc1wiKVxuICAgIHByb2plY3QudGVjaG5vbG9naWVzLmZvckVhY2goKGljb24pID0+IHtcbiAgICAgIGxldCB0ZWNoSWNvbiA9IHRlY2hJY29ucy5hcHBlbmRDaGlsZChjZWNsKFwiaW1nXCIsIFwidGVjaC1pY29uXCIpKVxuICAgICAgdGVjaEljb24uc3JjID0gYHNyYy9pbWcvJHtpY29uLmljb25fdXJsfWBcbiAgICB9KVxuICAgIGxldCBkZXNjcmlwdGlvbiA9IGNlY2woJ2RpdicsICdkZXNjcmlwdGlvbicpXG4gICAgZGVzY3JpcHRpb24uaW5uZXJIVE1MID0gcHJvamVjdC5kZXNjcmlwdGlvblxuXG4gICAgaWYgKGNvbnRhaW5lcldpZHRoIDwgOTAwKSB7XG4gICAgICBsaW5rTW9kYWwuYXBwZW5kQ2hpbGQodGVjaEljb25zKVxuICAgICAgbGlua01vZGFsLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKVxuICAgIH0gZWxzZSB7XG4gICAgICBsaW5rTW9kYWwuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pXG4gICAgICBsaW5rTW9kYWwuYXBwZW5kQ2hpbGQodGVjaEljb25zKVxuICAgIH1cblxuICAgIGNvbnN0IGxpbmtNb2RhbEljb25zID0gbGlua01vZGFsLmFwcGVuZENoaWxkKGNlY2woJ2RpdicsICdsaW5rLW1vZGFsLWljb25zJykpXG5cbiAgICBsaW5rTW9kYWxJY29ucy5pbm5lckhUTUwgPVxuICAgICAgYDxkaXY+PGEgaHJlZj0ke3Byb2plY3Quc2l0ZV91cmx9IHRhcmdldD0nX2JsYW5rJz48aSBjbGFzcz1cImZhcyBmYS1ob21lIGZhLWZ3XCI+PC9pPjwvYT5cbiAgICA8cCBjbGFzcz0naG9tZS10b29sLXRpcCc+d2Vic2l0ZTwvcD48L2Rpdj5cblxuICAgIDxkaXY+PGEgaHJlZj0ke3Byb2plY3QuZ2l0aHViX3VybH0gdGFyZ2V0PSdfYmxhbmsnPjxpIGNsYXNzPVwiZmFiIGZhLWdpdGh1YlwiPjwvaT48L2E+XG4gICAgPHAgY2xhc3M9J2dpdGh1Yi10b29sLXRpcCc+Z2l0aHViPC9wPjwvZGl2PmBcblxuXG4gICAgLyoqKioqKioqKioqKioqXG4gICAgQUREIExJTksgTU9EQUxcbiAgICAqKioqKioqKioqKioqKiovXG4gICAgaW1nV3JhcHBlcltpbmRleF0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIFxuICAgICBcbiAgICAgXG4gICAgICBpZiAoYm9vbCA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgYm9vbCA9IFwiZmFsc2VcIlxuICAgICAgICBpbm5lckltZ1dyYXBbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJjbG9zZS1jdXJ0YWluXCIpXG4gICAgICAgIGlubmVySW1nV3JhcFtpbmRleF0uY2xhc3NMaXN0LnJlbW92ZShcIm9wZW4tY3VydGFpblwiKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhsYXN0Q2hpbGQpXG4gICAgICAgIGlubmVySW1nV3JhcFtpbmRleF0ubGFzdENoaWxkLnJlbW92ZSgpXG4gICAgICAgIGltZ1dyYXBwZXJbaW5kZXhdLmxhc3RDaGlsZC5yZW1vdmUoKVxuXG5cbiAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uc3R5bGUud2lkdGggPSAnODAlJ1xuICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5zdHlsZS5wYWRkaW5nID0gJzYlJ1xuICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5zdHlsZS5tYXJnaW4gPSAnMCdcblxuICAgICAgICBwcm9qZWN0V3JhcC5zdHlsZS5tYXJnaW4gPSAnMCAxMCUgMyUgMTAlJ1xuICAgICAgICBpbm5lckltZ1dyYXBbaW5kZXhdLnN0eWxlLndpZHRoID0gJzEwMCUnXG5cbiAgICAgICAgcHJvamVjdFdyYXAuY2xhc3NMaXN0LnJlbW92ZShcInByb2plY3Qtd3JhcC1jbGlja1wiKVxuXG4gICAgICBcblxuICAgICAgfSBlbHNlIGlmIChib29sID09PSBcImZhbHNlXCIpIHtcbiAgICAgICBjb25zb2xlLmxvZygndHJ1ZScpXG4gICAgICAgIGJvb2wgPSBcInRydWVcIlxuICAgICAgICBpbm5lckltZ1dyYXBbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJvcGVuLWN1cnRhaW5cIilcbiAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKFwiY2xvc2UtY3VydGFpblwiKVxuICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5hcHBlbmRDaGlsZChsaW5rTW9kYWwpXG4gICAgICAgIHByb2plY3RXcmFwLnN0eWxlLm1hcmdpbiA9ICcwIDUlIDUlIDUlJ1xuXG5cblxuICAgICAgICBpZiAoY29udGFpbmVyV2lkdGggPCA5MDApIHtcbiAgICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbidcbiAgICAgICAgICBsaW5rTW9kYWwuc3R5bGUud2lkdGggPSAnOTAlJ1xuICAgICAgICAgIHRlY2hJY29ucy5zdHlsZS53aWR0aCA9ICc4MCUnXG4gICAgICAgICAgbGlua01vZGFsLnN0eWxlLm1hcmdpblRvcCA9ICc1JSdcbiAgICAgICAgICBsaW5rTW9kYWwuc3R5bGUuYmFja2dyb3VuZCA9ICdyZ2IoMjQwLCAyNTMsIDI1MyknXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5zdHlsZS53aWR0aCA9ICc5MCUnXG4gICAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uc3R5bGUucGFkZGluZyA9ICcyJSdcbiAgICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5zdHlsZS5tYXJnaW4gPSAnMCBhdXRvJ1xuICAgICAgICAgIC8vIHByb2plY3RXcmFwLnN0eWxlLm1hcmdpbiA9ICcwIDElJ1xuXG4gICAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5zdHlsZS53aWR0aCA9ICc5OSUnXG4gICAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5zdHlsZS5oZWlnaHQgPSAnOTklJ1xuICAgICAgICAgIC8vIFxuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoY29udGFpbmVyV2lkdGggPCA5MDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnOTAwLScpXG4gICAgICAgICAgaW1hZ2UuYXBwZW5kQ2hpbGQodGVjaEljb25zKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCc5MDArJylcbiAgICAgICAgICBpbm5lckltZ1dyYXBbaW5kZXhdLmFwcGVuZENoaWxkKHRlY2hJY29ucylcblxuICAgICAgICB9XG5cblxuXG4gICAgICAgIGNvbnNvbGUubG9nKGltYWdlKVxuXG4gICAgICAgIGxldCBpdyA9IGltZ1dyYXBwZXJbaW5kZXhdLnN0eWxlXG4gICAgICAgIGl3LnNldFByb3BlcnR5KFxuICAgICAgICAgIFwiLS1hbmltYXRpb25cIixcbiAgICAgICAgICBcImFuaW1hdGUtaW1nLXdyYXBwZXIgMS41cyBsaW5lYXIgZm9yd2FyZHNcIlxuICAgICAgICApXG4gICAgICAgIHByb2plY3RXcmFwLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXdyYXAtY2xpY2tcIilcblxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvKioqKioqKioqKioqKioqKioqKlxuICAgICBFRElUIFBST0pFQ1QgQlVUVE9OXG4gICAgKioqKioqKioqKioqKioqKioqKiovXG4gICBcbiAgICBpZiAodXNlciAmJiB1c2VyLmlzQWRtaW4pIHtcblxuICAgICAgY29uc3QgZWRpdFByb2plY3RXcmFwcGVyID0gY2VjbChcImRpdlwiLCBcImVkaXQtcHJvamVjdC13cmFwcGVyXCIpXG4gICAgICBjb25zdCBlZGl0QnV0dG9uID0gQnV0dG9uKFwic2hvdy1lZGl0LWJ1dHRvblwiLCBcInN1Ym1pdFwiLCBcInVwZGF0ZVwiKVxuICAgICAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0V3JhcC5sYXN0Q2hpbGQuY2xhc3NOYW1lKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgcHJvamVjdFdyYXAubGFzdENoaWxkLmNsYXNzTmFtZSAhPT0gXCJlZGl0LXByb2plY3QtZm9ybVwiXG4gICAgICAgIClcbiAgICAgICAgICBFZGl0UHJvamVjdChwcm9qZWN0V3JhcCwgcHJvamVjdClcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcHJvamVjdFdyYXAubGFzdENoaWxkLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBlZGl0UHJvamVjdFdyYXBwZXIuYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbilcblxuICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgIERFTEVURSBQUk9KRUNUIEJVVFRPTlxuICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gQnV0dG9uKFwiZGVsZXRlLXByb2plY3RcIiwgXCJzdWJtaXRcIiwgXCJkZWxldGVcIilcbiAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgYW5zd2VyID0gY29uZmlybShgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSAke3Byb2plY3QubmFtZX0/YClcbiAgICAgICAgYW5zd2VyICYmIGF3YWl0IGRlbGV0ZVByb2plY3QocHJvamVjdC5pZClcbiAgICAgICAgYW5zd2VyICYmIGF3YWl0IFByb2plY3RzKClcbiAgICAgIH0pXG4gICAgICBlZGl0UHJvamVjdFdyYXBwZXIuYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uKVxuICAgICAgcHJvamVjdFdyYXAuYXBwZW5kQ2hpbGQoZWRpdFByb2plY3RXcmFwcGVyKVxuICAgIH1cbiAgfSlcblxuICAvKioqKioqKioqKipcbiAgQUREIFBST0pFQ1QgXG4gICoqKioqKioqKioqKi9cbiAgaWYgKHVzZXIgJiYgdXNlci5pc0FkbWluKSB7XG5cbiAgICBsZXQgYWRkQnRuID0gQnV0dG9uKFwic2hvdy1hZGQtZm9ybVwiLCBcInN1Ym1pdFwiLCBcImFkZCBwcm9qZWN0XCIpXG4gICAgYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhtYWluQ29udGVudC5sYXN0Q2hpbGQucHJldmlvdXNTaWJsaW5nLmNsYXNzTmFtZSlcbiAgICAgIGlmIChtYWluQ29udGVudC5sYXN0Q2hpbGQucHJldmlvdXNTaWJsaW5nLmNsYXNzTmFtZSA9PT0gXCJzaG93LWFkZC1mb3JtXCIpXG4gICAgICAgIEVkaXRQcm9qZWN0KG1haW5Db250ZW50LCByZXNwWzBdLCBcImFkZFByb2plY3RcIilcbiAgICAgIGVsc2Uge1xuICAgICAgICBtYWluQ29udGVudC5sYXN0Q2hpbGQucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgYWMobWFpbkNvbnRlbnQsIGFkZEJ0bilcbiAgfVxuXG4gIG1haW5Db250ZW50LmFwcGVuZENoaWxkKEZvb3RlcigpKVxuXG5cbn1cbiIsImltcG9ydCB7IEZvcm0sIElucHV0LCBCdXR0b24sIENoZWNrYm94LCBMYWJlbCB9IGZyb20gXCIuLi9TaGFyZWQvRm9ybS5qc1wiXG5pbXBvcnQgeyBnZXRUZWNobm9sb2dpZXMgfSBmcm9tIFwiLi4vU2VydmljZXMvQXBpVGVjaC5qc1wiXG5pbXBvcnQge1xuICBnZXRQcm9qZWN0LFxuICBhZGRQcm9qZWN0IGFzIGFkZE5ld1Byb2plY3QsXG4gIHVwZGF0ZVByb2plY3QsXG4gIGRlbGV0ZVByb2plY3QsXG4gIHVwZGF0ZVByb2plY3RUZWNobm9sb2dpZXMsXG59IGZyb20gXCIuLi9TZXJ2aWNlcy9BcGlQcm9qZWN0LmpzXCJcbmltcG9ydCB7IFByb2plY3RzIH0gZnJvbSBcIi4vUHJvamVjdHMuanNcIlxuaW1wb3J0IHsgYWMsIGNlY2wgfSBmcm9tIFwiLi4vSGVscGVycy9kb21IZWxwZXIuanNcIlxuXG5leHBvcnQgY29uc3QgRWRpdFByb2plY3QgPSBhc3luYyAocHJvamVjdFdyYXAsIHByb2plY3QsIGFkZFByb2plY3QpID0+IHtcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxuICBNQUtFIEFORCBTRVQgRk9STSAgSU5QVVRTXG4gICoqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIGNvbnNvbGUubG9nKFwiYWRkXCIsIGFkZFByb2plY3QpXG4gIGlmIChhZGRQcm9qZWN0ID09PSBcImFkZFByb2plY3RcIikge1xuICAgIGZvciAobGV0IGl0ZW0gaW4gcHJvamVjdCkge1xuICAgICAgcHJvamVjdFtpdGVtXSA9IFwiXCJcbiAgICB9XG4gIH1cbiAgbGV0IG5ld1Byb2plY3QgPSB7fVxuXG4gIGxldCBoYW5kbGVDaGFuZ2UgPSAoZSkgPT4ge1xuICAgIG5ld1Byb2plY3RbZS50YXJnZXQubmFtZV0gPSBlLnRhcmdldC52YWx1ZVxuICB9XG5cbiAgbGV0IGZvcm0gPSBGb3JtKFwiZWRpdC1wcm9qZWN0LWZvcm1cIilcbiAgbGV0IGlucHV0cyA9IGNlY2woJ2RpdicsICdlZGl0LWZvcm0taW5wdXRzJylcbiAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dHMpXG4gIE9iamVjdC5rZXlzKHByb2plY3QpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChcbiAgICAgIGtleSAhPT0gXCJpZFwiICYmXG4gICAgICBrZXkgIT09IFwidGVjaG5vbG9naWVzXCIgJiZcbiAgICAgIGtleSAhPT0gXCJjcmVhdGVkX2F0XCIgJiZcbiAgICAgIGtleSAhPT0gXCJ1cGRhdGVkX2F0XCJcbiAgICApIHtcbiAgICAgIG5ld1Byb2plY3Rba2V5XSA9IHByb2plY3Rba2V5XVxuICAgICAgY29uc3QgaW5wdXQgPSBJbnB1dCh7XG4gICAgICAgIGNsYXNzTmFtZTogXCJlZGl0LWZvcm0taW5wdXRcIixcbiAgICAgICAgbmFtZToga2V5LFxuICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgdmFsdWU6IGFkZFByb2plY3QgPT09IFwiYWRkUHJvamVjdFwiID8gXCJcIiA6IG5ld1Byb2plY3Rba2V5XSxcbiAgICAgICAgcGxhY2Vob2xkZXI6IGtleSxcbiAgICAgICAgaGFuZGxlQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsXG4gICAgICB9KVxuICAgICAgaW5wdXRzLmFwcGVuZENoaWxkKGlucHV0KVxuICAgIH1cbiAgfSlcblxuICAvKioqKioqKioqKioqKipcbiAgIFNFVCBDSEVDS0JPWEVTXG4gICoqKioqKioqKioqKioqKi9cbiAgY29uc3QgY2hlY2tzID0gY2VjbCgnZGl2JywgJ2VkaXQtZm9ybS1jaGVja2JveGVzJylcbiAgZm9ybS5hcHBlbmRDaGlsZChjaGVja3MpXG4gIGxldCB0ZWNobm9sb2dpZXMgPSBhd2FpdCBnZXRUZWNobm9sb2dpZXMoKVxuICB0ZWNobm9sb2dpZXMubWFwKCh0ZWNobm9sb2d5KSA9PiB7XG5cbiAgICBsZXQgY2hlY2tlZFxuICAgIGFkZFByb2plY3QgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgcHJvamVjdC50ZWNobm9sb2dpZXMuZm9yRWFjaCgocHJvamVjdFRlY2hub2xvZ3kpID0+IHtcbiAgICAgICAgaWYgKHRlY2hub2xvZ3kubmFtZSA9PT0gcHJvamVjdFRlY2hub2xvZ3kubmFtZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRlY2hub2xvZ3kubmFtZSwgcHJvamVjdFRlY2hub2xvZ3kubmFtZSlcbiAgICAgICAgICBjaGVja2VkID0gXCJjaGVja2VkXCJcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICBsZXQgYnggPSBDaGVja2JveCh7XG4gICAgICBjbGFzc05hbWU6IFwiZWRpdC1wcm9qZWN0LWNoa2JveFwiLFxuICAgICAgbmFtZTogdGVjaG5vbG9neS5uYW1lLFxuICAgICAgaWQ6IHRlY2hub2xvZ3kubmFtZSxcbiAgICAgIHZhbHVlOiB0ZWNobm9sb2d5LmlkLFxuICAgICAgY2hlY2tlZDogYWRkUHJvamVjdCA9PT0gXCJhZGRQcm9qZWN0XCIgPyBcIlwiIDogY2hlY2tlZCxcblxuICAgIH0pXG4gICAgY2hlY2tzLmFwcGVuZENoaWxkKGJ4KVxuICAgIGNoZWNrcy5hcHBlbmRDaGlsZChMYWJlbChcInRlY2gtYm94LWxhYmVsXCIsIHRlY2hub2xvZ3kubmFtZSwgXCJ0ZWNoLWJveFwiKSlcblxuICB9KVxuICBmb3JtLmFwcGVuZENoaWxkKFxuICAgIEJ1dHRvbihcbiAgICAgIFwiZWRpdC1wcm9qZWN0LWJ1dHRvblwiLFxuICAgICAgXCJzdWJtaXRcIixcbiAgICAgIGFkZFByb2plY3QgPT09IFwiYWRkUHJvamVjdFwiID8gXCJhZGQgbmV3IHByb2plY3RcIiA6IFwic3VibWl0XCJcbiAgICApXG4gIClcblxuXG4gIGFjKHByb2plY3RXcmFwLCBmb3JtKVxuXG5cbiAgLyoqKioqKioqKipcbiAgIFNVQk1JVCBGT1JNXG4gICoqKioqKioqKioqL1xuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYXN5bmMgKGV2dCkgPT4ge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWRcIilcbiAgICBuZXdQcm9qZWN0LnRlY2hub2xvZ2llcyA9IFtdXG4gICAgY2hlY2tib3hlcy5mb3JFYWNoKChib3gpID0+IHtcbiAgICAgIG5ld1Byb2plY3QudGVjaG5vbG9naWVzLnB1c2goYm94LnZhbHVlKVxuICAgIH0pXG4gICAgYWRkUHJvamVjdCA9PT0gXCJhZGRQcm9qZWN0XCJcbiAgICAgID8gYXdhaXQgYWRkTmV3UHJvamVjdChuZXdQcm9qZWN0KVxuICAgICAgOiBhd2FpdCB1cGRhdGVQcm9qZWN0KG5ld1Byb2plY3QsIHByb2plY3QuaWQpXG5cbiAgICBhd2FpdCBQcm9qZWN0cygpXG4gIH0pXG59XG4iLCJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanMhLi9wcm9qZWN0cy5zY3NzXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG52YXIgZXhwb3J0ZWQgPSBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDoge307XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydGVkOyJdLCJzb3VyY2VSb290IjoiIn0=