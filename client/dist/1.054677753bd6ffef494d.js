(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{100:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l}));var o=n(99);const a=Object(o.a)();const c=async e=>(console.log(JSON.stringify(e)),await fetch(a+"/users",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>(localStorage.setItem("authToken",e.token),e))),i=async e=>{console.log(e);let t=await fetch(a+"/auth/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>(localStorage.setItem("authToken",e.token),e));return console.log(t),t},s=async()=>{if(localStorage.getItem("authToken")){return await fetch(a+"/auth/verify",{method:"get",headers:(e={"Content-Type":"application/json"},localStorage.authToken?{...e,Authorization:`Bearer ${localStorage.authToken}`}:e)}).then(e=>e.json()).then(e=>e)}var e;return!1},l=async()=>(localStorage.removeItem("authToken"),{"Content-Type":"application/json"},"logged out")},102:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l}));var o=n(99);const a=Object(o.a)();let c=async()=>await fetch(`${a}/technologies`).then(e=>e.json()).then(e=>e),i=async e=>await fetch(`${a}/technologies`,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e);const s=async(e,t)=>{await fetch(`${a}/technologies/${t}`,{method:"put",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e)},l=async e=>{await fetch(`${a}/technologies/${e}`,{method:"delete",headers:{"Content-Type":"application/json"}}).then(e=>e).then(e=>e)}},103:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l}));var o=n(99);const a=Object(o.a)();let c=async()=>await fetch(`${a}/projects`).then(e=>e.json()).then(e=>e);const i=async e=>{const t=await fetch(`${a}/projects`,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e);console.log(t)},s=async(e,t)=>{await fetch(`${a}/projects/${t}`,{method:"put",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e)},l=async e=>{const t=await fetch(`${a}/projects/${e}`,{method:"delete",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e);console.log(t)}},106:function(e,t,n){"use strict";n.r(t),n.d(t,"Projects",(function(){return h}));var o=n(0),a=n(100),c=n(101),i=n(4),s=n(103),l=n(3),d=n(109);n(110);const r=e=>{for(;e.childNodes.length;)e.removeChild(e.lastChild)};async function h(){const e=Object(o.e)(".scrollable-content");r(e),e.appendChild(Object(o.c)("div","loading")).innerHTML="loading...";const t=await Object(a.d)(),n=await Object(s.c)();r(e);const p=e.clientWidth;if(n.forEach(async(n,a)=>{const i=e.appendChild(Object(o.c)("div","project-wrap")),r=i.appendChild(Object(c.a)(`src/img/${n.img_url}`,n.name,!0,n.site_url,n.build_date));let u="false",f=Object(o.c)("div","link-modal"),j=Object(o.f)(".img-wrapper"),b=Object(o.f)(".inner-img-wrap"),g=Object(o.c)("div","tech-icons");n.technologies.forEach(e=>{g.appendChild(Object(o.c)("img","tech-icon")).src=`src/img/${e.icon_url}`});let m=Object(o.c)("div","description");if(m.innerHTML=n.description,p<900?(f.appendChild(g),f.appendChild(m)):(f.appendChild(m),f.appendChild(g)),f.appendChild(Object(o.c)("div","link-modal-icons")).innerHTML=`<div><a href=${n.site_url} target='_blank'><i class="fas fa-home fa-fw"></i></a>\n    <p class='home-tool-tip'>website</p></div>\n\n    <div><a href=${n.github_url} target='_blank'><i class="fab fa-github"></i></a>\n    <p class='github-tool-tip'>github</p></div>`,j[a].addEventListener("click",async()=>{if(console.log("is it so"),"true"===u)u="false",b[a].classList.add("close-curtain"),b[a].classList.remove("open-curtain"),b[a].lastChild.remove(),j[a].lastChild.remove(),j[a].style.width="80%",j[a].style.padding="6%",j[a].style.margin="0",i.style.margin="0 10% 3% 10%",b[a].style.width="100%",i.classList.remove("project-wrap-click");else if("false"===u){console.log(u),u="true",b[a].classList.add("open-curtain"),b[a].classList.remove("close-curtain"),j[a].appendChild(f),p<900?(j[a].style.flexDirection="column",f.style.width="90%",g.style.width="80%",f.style.marginTop="5%",f.style.background="rgb(240, 253, 253)"):(j[a].style.width="90%",j[a].style.padding="2%",j[a].style.margin="0 auto",i.style.margin="0 1%",b[a].style.width="99%",b[a].style.height="99%"),p<900?(console.log("900-"),r.appendChild(g)):(console.log("900+"),b[a].appendChild(g)),console.log(r),j[a].style.setProperty("--animation","animate-img-wrapper 1.5s linear forwards"),i.classList.add("project-wrap-click")}}),t&&t.isAdmin){const e=Object(o.c)("div","edit-project-wrapper"),t=Object(l.a)("show-edit-button","submit","update");t.addEventListener("click",()=>{console.log(i.lastChild.className),"edit-project-form"!==i.lastChild.className?Object(d.EditProject)(i,n):i.lastChild.remove()}),e.appendChild(t);const a=Object(l.a)("delete-project","submit","delete");a.addEventListener("click",async()=>{let e=confirm(`Are you sure you want to delete ${n.name}?`);e&&await Object(s.b)(n.id),e&&await h()}),e.appendChild(a),i.appendChild(e)}}),t&&t.isAdmin){let t=Object(l.a)("show-add-form","submit","add project");t.addEventListener("click",()=>{console.log(e.lastChild.previousSibling.className),"show-add-form"===e.lastChild.previousSibling.className?Object(d.EditProject)(e,n[0],"addProject"):e.lastChild.remove()}),Object(o.b)(e,t)}e.appendChild(Object(i.a)())}},109:function(e,t,n){"use strict";n.r(t),n.d(t,"EditProject",(function(){return l}));var o=n(3),a=n(102),c=n(103),i=n(106),s=n(0);const l=async(e,t,n)=>{if(console.log("add",n),"addProject"===n)for(let e in t)t[e]="";let l={},d=e=>{console.log(e.target.name,e.target.value),l[e.target.name]=e.target.value,console.log("cmon",l)},r=Object(o.c)("edit-project-form"),h=Object(s.c)("div","edit-form-inputs");r.appendChild(h),Object.keys(t).forEach(e=>{if("id"!==e&&"technologies"!==e&&"created_at"!==e&&"updated_at"!==e){l[e]=t[e];const a=Object(o.d)({className:"edit-form-input",name:e,type:"text",value:"addProject"===n?"":l[e],placeholder:e,handleChange:d});h.appendChild(a)}});const p=Object(s.c)("div","edit-form-checkboxes");r.appendChild(p),(await Object(a.c)()).map(e=>{let a;void 0===n&&t.technologies.forEach(t=>{e.name===t.name&&(console.log(e.name,t.name),a="checked")});let c=Object(o.b)({className:"edit-project-chkbox",name:e.name,id:e.name,value:e.id,checked:"addProject"===n?"":a});p.appendChild(c),p.appendChild(Object(o.e)("tech-box-label",e.name,"tech-box"))}),r.appendChild(Object(o.a)("edit-project-button","submit","addProject"===n?"add new project":"submit")),Object(s.b)(e,r),r.addEventListener("submit",async e=>{e.preventDefault(),console.log("add",n);const o=document.querySelectorAll("input[type=checkbox]:checked");console.log(o,l),l.technologies=[],o.forEach(e=>{l.technologies.push(e.value)}),console.log("add",l),"addProject"===n?await Object(c.a)(l):await Object(c.d)(l,t.id),await Object(i.Projects)()})}},110:function(e,t,n){var o=n(1),a=n(111);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var c={insert:"head",singleton:!1},i=(o(a,c),a.locals?a.locals:{});e.exports=i},111:function(e,t,n){},99:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=()=>"https://portfolio-mick-server.herokuapp.com"}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9TZXJ2aWNlcy9BcGlBdXRoLmpzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1NlcnZpY2VzL0FwaVRlY2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvU2VydmljZXMvQXBpUHJvamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Qcm9qZWN0cy9Qcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Qcm9qZWN0cy9FZGl0UHJvamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Qcm9qZWN0cy9wcm9qZWN0cy5zY3NzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1NlcnZpY2VzL0Jhc2VVcmwuanMiXSwibmFtZXMiOlsiYmFzZVVybCIsInNpZ25VcCIsImFzeW5jIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwidGhlbiIsImpzb24iLCJkYXRhIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInRva2VuIiwibG9naW4iLCJyZXMiLCJ2ZXJpZnkiLCJnZXRJdGVtIiwiYXV0aFRva2VuIiwiQXV0aG9yaXphdGlvbiIsImxvZ291dCIsInJlbW92ZUl0ZW0iLCJnZXRUZWNobm9sb2dpZXMiLCJhbnMiLCJjcmVhdGVUZWNobm9sb2d5IiwidXBkYXRlVGVjaG5vbG9neSIsImlkIiwiZGVsZXRlVGVjaG5vbG9neSIsImdldFByb2plY3RzIiwiYWRkUHJvamVjdCIsInVwZGF0ZVByb2plY3QiLCJkZWxldGVQcm9qZWN0IiwiY2xlYXJQYWdlIiwiZWxlbWVudCIsImNoaWxkTm9kZXMiLCJsZW5ndGgiLCJyZW1vdmVDaGlsZCIsImxhc3RDaGlsZCIsIlByb2plY3RzIiwibWFpbkNvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsInVzZXIiLCJyZXNwIiwiY29udGFpbmVyV2lkdGgiLCJjbGllbnRXaWR0aCIsImZvckVhY2giLCJwcm9qZWN0IiwiaW5kZXgiLCJwcm9qZWN0V3JhcCIsImltYWdlIiwiaW1nX3VybCIsIm5hbWUiLCJzaXRlX3VybCIsImJ1aWxkX2RhdGUiLCJib29sIiwibGlua01vZGFsIiwiaW1nV3JhcHBlciIsImlubmVySW1nV3JhcCIsInRlY2hJY29ucyIsInRlY2hub2xvZ2llcyIsImljb24iLCJzcmMiLCJpY29uX3VybCIsImRlc2NyaXB0aW9uIiwiZ2l0aHViX3VybCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJzdHlsZSIsIndpZHRoIiwicGFkZGluZyIsIm1hcmdpbiIsImZsZXhEaXJlY3Rpb24iLCJtYXJnaW5Ub3AiLCJiYWNrZ3JvdW5kIiwiaGVpZ2h0Iiwic2V0UHJvcGVydHkiLCJpc0FkbWluIiwiZWRpdFByb2plY3RXcmFwcGVyIiwiZWRpdEJ1dHRvbiIsImNsYXNzTmFtZSIsImRlbGV0ZUJ1dHRvbiIsImFuc3dlciIsImNvbmZpcm0iLCJhZGRCdG4iLCJwcmV2aW91c1NpYmxpbmciLCJFZGl0UHJvamVjdCIsIml0ZW0iLCJuZXdQcm9qZWN0IiwiaGFuZGxlQ2hhbmdlIiwiZSIsInRhcmdldCIsInZhbHVlIiwiZm9ybSIsImlucHV0cyIsIk9iamVjdCIsImtleXMiLCJrZXkiLCJpbnB1dCIsInR5cGUiLCJwbGFjZWhvbGRlciIsImNoZWNrcyIsIm1hcCIsInRlY2hub2xvZ3kiLCJjaGVja2VkIiwidW5kZWZpbmVkIiwicHJvamVjdFRlY2hub2xvZ3kiLCJieCIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiY2hlY2tib3hlcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImJveCIsInB1c2giLCJhcGkiLCJjb250ZW50IiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJtb2R1bGUiLCJpIiwib3B0aW9ucyIsImV4cG9ydGVkIiwibG9jYWxzIiwiZXhwb3J0cyIs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WXFFLEdBQ25CTixFQUFPL0QsWUFBWSxZQUFNLGlCQUFrQmlFLEVBQVdyRCxLQUFNLGVBRzlEMkMsRUFBS3ZELFlBQ0gsWUFDRSxzQkFDQSxTQUNlLGVBQWZYLEVBQThCLGtCQUFvQixXQUt0RCxZQUFHb0IsRUFBYThDLEdBTWhCQSxFQUFLN0IsaUJBQWlCLFNBQVVuRSxNQUFPK0csSUFDckNBLEVBQUlDLGlCQUNKOUcsUUFBUUMsSUFBSSxNQUFPMkIsR0FFbkIsTUFBTW1GLEVBQWFDLFNBQVNDLGlCQUFpQixnQ0FDN0NqSCxRQUFRQyxJQUFJOEcsRUFBWXRCLEdBQ3hCQSxFQUFXOUIsYUFBZSxHQUMxQm9ELEVBQVdsRSxRQUFTcUUsSUFDbEJ6QixFQUFXOUIsYUFBYXdELEtBQUtELEVBQUlyQixTQUVuQzdGLFFBQVFDLElBQUksTUFBT3dGLEdBQ0osZUFBZjdELFFBQ1UsWUFBYzZELFNBQ2QsWUFBY0EsRUFBWTNDLEVBQVFyQixVQUV0Qyx5QixvQkMvR1YsSUFBSTJGLEVBQU0sRUFBUSxHQUNGQyxFQUFVLEVBQVEsS0FJQyxpQkFGdkJBLEVBQVVBLEVBQVFDLFdBQWFELEVBQVFFLFFBQVVGLEtBRy9DQSxFQUFVLENBQUMsQ0FBQ0csRUFBT0MsRUFBSUosRUFBUyxNQUc5QyxJQUFJSyxFQUFVLENBRWQsT0FBaUIsT0FDakIsV0FBb0IsR0FJaEJDLEdBRlNQLEVBQUlDLEVBQVNLLEdBRVhMLEVBQVFPLE9BQVNQLEVBQVFPLE9BQVMsSUFJakRKLEVBQU9LLFFBQVVGLEcsd0ZDbkJWLE1BQU1HLEVBQVUsSUFFNEIiLCJmaWxlIjoiMS4wNTQ2Nzc3NTNiZDZmZmVmNDk0ZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VVcmwgfSBmcm9tIFwiLi9CYXNlVXJsLmpzXCJcbmNvbnN0IGJhc2VVcmwgPSBCYXNlVXJsKClcblxuZXhwb3J0IGZ1bmN0aW9uIHNldEhlYWRlcnMoaGVhZGVycykge1xuICBpZiAobG9jYWxTdG9yYWdlLmF1dGhUb2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5oZWFkZXJzLFxuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2xvY2FsU3RvcmFnZS5hdXRoVG9rZW59YCxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGhlYWRlcnNcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY2xlYXJIZWFkZXJzID0gKGhlYWRlcnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5oZWFkZXJzLFxuICAgIEF1dGhvcml6YXRpb246IG51bGwsXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNpZ25VcCA9IGFzeW5jIChib2R5KSA9PiB7XG4gIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGJvZHkpKVxuXG4gIGxldCByZXMgPSBhd2FpdCBmZXRjaChiYXNlVXJsICsgXCIvdXNlcnNcIiwge1xuICAgIG1ldGhvZDogXCJwb3N0XCIsXG4gICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICB9KVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYXV0aFRva2VuXCIsIGRhdGEudG9rZW4pXG5cbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSlcbiAgcmV0dXJuIHJlc1xufVxuXG5leHBvcnQgY29uc3QgbG9naW4gPSBhc3luYyAoYm9keSkgPT4ge1xuICBjb25zb2xlLmxvZyhib2R5KVxuICBsZXQgcmVzID0gYXdhaXQgZmV0Y2goYmFzZVVybCArIFwiL2F1dGgvbG9naW5cIiwge1xuICAgIG1ldGhvZDogXCJwb3N0XCIsXG4gICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICB9KVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5qc29uKClcblxuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImF1dGhUb2tlblwiLCBkYXRhLnRva2VuKVxuXG5cbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSlcbiAgY29uc29sZS5sb2cocmVzKVxuICByZXR1cm4gcmVzXG59XG5cbmV4cG9ydCBjb25zdCB2ZXJpZnkgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJhdXRoVG9rZW5cIilcbiAgLy8gY29uc29sZS5sb2codG9rZW4pXG4gIGlmICh0b2tlbikge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGJhc2VVcmwgKyBcIi9hdXRoL3ZlcmlmeVwiLCB7XG4gICAgICBtZXRob2Q6IFwiZ2V0XCIsXG4gICAgICBoZWFkZXJzOiBzZXRIZWFkZXJzKHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgICAgcmV0dXJuIGpzb24uanNvbigpXG4gICAgICB9KVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgcmV0dXJuIGRhdGFcbiAgICAgIH0pXG5cbiAgICByZXR1cm4gcmVzXG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cblxuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRVc2VyID0gYXN5bmMgKCkgPT4ge1xuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJhdXRoVG9rZW5cIikpIHtcbiAgICAvLyBjb25zb2xlLmxvZyhcImhlcmVcIiwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJhdXRoVG9rZW5cIikpXG4gICAgbGV0IHVzZXIgPSBhd2FpdCB2ZXJpZnkoKVxuICAgIGNvbnNvbGUubG9nKHVzZXIpXG4gICAgaWYgKCF1c2VyLmVycm9ycykge1xuICAgICAgLy8gbG9naW5CdXR0b24uaW5uZXJUZXh0ID0gXCJsb2dvdXRcIlxuICAgICAgLy8gbG9nZ2VkSW4gPSB0cnVlXG4gICAgICByZXR1cm4gdXNlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBsb2dpbkJ1dHRvbi5pbm5lclRleHQgPSBcImxvZ2luXCJcblxuICAgIC8vIGxvZ2dlZEluID0gZmFsc2VcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBjb25zb2xlLmxvZyhsb2dnZWRJbilcbn1cblxuZXhwb3J0IGNvbnN0IGxvZ291dCA9IGFzeW5jICgpID0+IHtcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJhdXRoVG9rZW5cIilcbiAgY2xlYXJIZWFkZXJzKHtcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSlcbiAgcmV0dXJuIFwibG9nZ2VkIG91dFwiXG59XG4iLCJpbXBvcnQgeyBCYXNlVXJsIH0gZnJvbSAnLi9CYXNlVXJsLmpzJ1xuY29uc3QgYmFzZVVybCA9IEJhc2VVcmwoKVxuXG5cblxuXG5leHBvcnQgbGV0IGdldFRlY2hub2xvZ2llcyA9IGFzeW5jICgpID0+IHtcbiAgbGV0IHJlc3VsdHMgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS90ZWNobm9sb2dpZXNgKVxuICAgIC50aGVuKChyZXMpID0+IHtcblxuICAgICAgcmV0dXJuIHJlcy5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChhbnMpID0+IHtcbiAgICAgIHJldHVybiBhbnNcbiAgICB9KVxuXG4gIHJldHVybiByZXN1bHRzXG59XG5cblxuZXhwb3J0IGxldCBjcmVhdGVUZWNobm9sb2d5ID0gYXN5bmMgKGJvZHkpID0+IHtcbiAgbGV0IHJlc3VsdHMgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS90ZWNobm9sb2dpZXNgLCB7XG4gICAgbWV0aG9kOiBgcG9zdGAsXG4gICAgYm9keTpKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9LFxuICB9KVxuICAudGhlbigocmVzKT0+e1xuICAgIHJldHVybiByZXMuanNvbigpXG4gIH0pXG4gIC50aGVuKChhbnMpPT57XG4gICAgcmV0dXJuIGFuc1xuICB9KVxuICByZXR1cm4gcmVzdWx0c1xufVxuXG5cbmV4cG9ydCBjb25zdCB1cGRhdGVUZWNobm9sb2d5ID0gYXN5bmMgKGJvZHksIGlkKSA9PiB7XG4gIFxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS90ZWNobm9sb2dpZXMvJHtpZH1gLCB7XG4gICAgbWV0aG9kOiBgcHV0YCxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgfSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24uanNvbigpXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9KVxuXG59XG5cbmV4cG9ydCBjb25zdCBkZWxldGVUZWNobm9sb2d5ID0gYXN5bmMoaWQpID0+IHtcbiAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9L3RlY2hub2xvZ2llcy8ke2lkfWAse1xuICAgIG1ldGhvZDogYGRlbGV0ZWAsXG4gICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9XG4gIH0pXG4gIC50aGVuKGpzb249PntcbiAgICByZXR1cm4ganNvblxuICB9KVxuICAudGhlbihkYXRhPT57XG4gICAgcmV0dXJuIGRhdGFcbiAgfSlcbn1cblxuIiwiaW1wb3J0IHsgQmFzZVVybCB9IGZyb20gJy4vQmFzZVVybC5qcydcbmNvbnN0IGJhc2VVcmwgPSBCYXNlVXJsKClcblxuXG5leHBvcnQgbGV0IGdldFByb2plY3RzID0gYXN5bmMgKCkgPT4ge1xuICBsZXQgcmVzdWx0cyA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9L3Byb2plY3RzYClcbiAgICAudGhlbigocmVzKSA9PiB7XG5cbiAgICAgIHJldHVybiByZXMuanNvbigpXG4gICAgfSlcbiAgICAudGhlbigoYW5zKSA9PiB7XG4gICAgICByZXR1cm4gYW5zXG4gICAgfSlcblxuICByZXR1cm4gcmVzdWx0c1xufVxuXG5leHBvcnQgbGV0IGdldFByb2plY3QgPSBhc3luYyAoaWQpID0+IHtcbiAgbGV0IHJlc3VsdCA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9L3Byb2plY3RzLyR7aWR9YClcbiAgICAudGhlbigocmVzKSA9PiB7XG5cbiAgICAgIHJldHVybiByZXMuanNvbigpXG4gICAgfSlcbiAgICAudGhlbigoYW5zKSA9PiB7XG4gICAgICByZXR1cm4gYW5zXG4gICAgfSlcblxuICByZXR1cm4gcmVzdWx0XG59XG5cblxuXG5leHBvcnQgY29uc3QgYWRkUHJvamVjdCA9IGFzeW5jIChib2R5KSA9PiB7XG4gXG4gXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9L3Byb2plY3RzYCwge1xuICAgIG1ldGhvZDogYHBvc3RgLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICB9KVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YVxuICAgIH0pXG4gIGNvbnNvbGUubG9nKHJlcylcbn1cblxuXG5leHBvcnQgY29uc3QgdXBkYXRlUHJvamVjdCA9IGFzeW5jIChib2R5LCBpZCkgPT4ge1xuICBcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVybH0vcHJvamVjdHMvJHtpZH1gLCB7XG4gICAgbWV0aG9kOiBgcHV0YCxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgfSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24uanNvbigpXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9KVxuXG59XG4vL1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVByb2plY3QgPSBhc3luYyAoaWQpID0+IHtcblxuXG5cbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVybH0vcHJvamVjdHMvJHtpZH1gLCB7XG4gICAgbWV0aG9kOiBgZGVsZXRlYCxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxuICB9KVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YVxuICAgIH0pXG4gIGNvbnNvbGUubG9nKHJlcylcbn1cblxuXG5leHBvcnQgY29uc3QgdXBkYXRlUHJvamVjdFRlY2hub2xvZ2llcyA9IGFzeW5jIChwcm9qZWN0X2lkLCBpZCkgPT4ge1xuICBjb25zb2xlLmxvZygndXB0JylcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVybH0vcHJvamVjdHMvJHtwcm9qZWN0X2lkfS90ZWNobm9sb2dpZXMvJHtpZH1gLCB7XG4gICAgbWV0aG9kOiBgcHV0YCxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxuICB9KVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gZGF0YVxuICAgIH0pXG4gIGNvbnNvbGUubG9nKHJlcylcblxufSIsIi8vIGltcG9ydCBcIi4uL1NoYXJlZC9JbWFnZVwiXG5pbXBvcnQgeyBxcywgcXNhLCBjZWNsLCBhYywgYnRuIH0gZnJvbSBcIi4uL0hlbHBlcnMvZG9tSGVscGVyXCJcbmltcG9ydCB7IHZlcmlmeSB9IGZyb20gXCIuLi9TZXJ2aWNlcy9BcGlBdXRoLmpzXCJcbmltcG9ydCB7IEltYWdlIH0gZnJvbSBcIi4uL1NoYXJlZC9JbWFnZS5qc1wiXG5pbXBvcnQgeyBGb290ZXIgfSBmcm9tIFwiLi4vRm9vdGVyL0Zvb3Rlci5qc1wiXG5pbXBvcnQge1xuICBnZXRQcm9qZWN0cyxcbiAgZGVsZXRlUHJvamVjdCxcblxufSBmcm9tIFwiLi4vU2VydmljZXMvQXBpUHJvamVjdC5qc1wiXG5pbXBvcnQgeyBGb3JtLCBJbnB1dCwgQnV0dG9uLCBDaGVja2JveCwgTGFiZWwgfSBmcm9tIFwiLi4vU2hhcmVkL0Zvcm0uanNcIlxuaW1wb3J0IHsgRWRpdFByb2plY3QgfSBmcm9tIFwiLi9FZGl0UHJvamVjdFwiXG5pbXBvcnQgXCIuL3Byb2plY3RzLnNjc3NcIlxuXG4vKioqKioqKioqKlxuIENMRUFSIFBBR0VcbioqKioqKioqKioqL1xuY29uc3QgY2xlYXJQYWdlID0gKGVsZW1lbnQpID0+IHtcbiAgd2hpbGUgKGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQubGFzdENoaWxkKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQcm9qZWN0cygpIHtcblxuICBjb25zdCBtYWluQ29udGVudCA9IHFzKCcuc2Nyb2xsYWJsZS1jb250ZW50JylcbiAgY2xlYXJQYWdlKG1haW5Db250ZW50KVxuICBsZXQgbG9hZGluZyA9IG1haW5Db250ZW50LmFwcGVuZENoaWxkKGNlY2woXCJkaXZcIiwgXCJsb2FkaW5nXCIpKVxuICBsb2FkaW5nLmlubmVySFRNTCA9IFwibG9hZGluZy4uLlwiXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnkoKVxuXG5cbiAgLyoqKioqKioqKioqKioqXG4gIFJFTkRFUiBQUk9KRUNUU1xuICAqKioqKioqKioqKioqKiovXG4gIGNvbnN0IHJlc3AgPSBhd2FpdCBnZXRQcm9qZWN0cygpXG4gIGNsZWFyUGFnZShtYWluQ29udGVudClcblxuICBjb25zdCBjb250YWluZXJXaWR0aCA9IG1haW5Db250ZW50LmNsaWVudFdpZHRoXG4gIHJlc3AuZm9yRWFjaChhc3luYyAocHJvamVjdCwgaW5kZXgpID0+IHtcblxuICAgIGNvbnN0IHByb2plY3RXcmFwID0gbWFpbkNvbnRlbnQuYXBwZW5kQ2hpbGQoY2VjbChcImRpdlwiLCBcInByb2plY3Qtd3JhcFwiKSlcbiAgICBjb25zdCBpbWFnZSA9IHByb2plY3RXcmFwLmFwcGVuZENoaWxkKFxuICAgICAgSW1hZ2UoYHNyYy9pbWcvJHtwcm9qZWN0LmltZ191cmx9YCwgcHJvamVjdC5uYW1lLCB0cnVlLCBwcm9qZWN0LnNpdGVfdXJsLCBwcm9qZWN0LmJ1aWxkX2RhdGUpXG4gICAgKVxuICAgXG4gICAgbGV0IGJvb2wgPSBcImZhbHNlXCJcbiAgICBsZXQgbGlua01vZGFsID0gY2VjbChcImRpdlwiLCBcImxpbmstbW9kYWxcIilcbiAgICBsZXQgaW1nV3JhcHBlciA9IHFzYShcIi5pbWctd3JhcHBlclwiKVxuICAgIGxldCBpbm5lckltZ1dyYXAgPSBxc2EoXCIuaW5uZXItaW1nLXdyYXBcIilcbiAgICBsZXQgdGVjaEljb25zID0gY2VjbChcImRpdlwiLCBcInRlY2gtaWNvbnNcIilcbiAgICBwcm9qZWN0LnRlY2hub2xvZ2llcy5mb3JFYWNoKChpY29uKSA9PiB7XG4gICAgICBsZXQgdGVjaEljb24gPSB0ZWNoSWNvbnMuYXBwZW5kQ2hpbGQoY2VjbChcImltZ1wiLCBcInRlY2gtaWNvblwiKSlcbiAgICAgIHRlY2hJY29uLnNyYyA9IGBzcmMvaW1nLyR7aWNvbi5pY29uX3VybH1gXG4gICAgfSlcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBjZWNsKCdkaXYnLCAnZGVzY3JpcHRpb24nKVxuICAgIGRlc2NyaXB0aW9uLmlubmVySFRNTCA9IHByb2plY3QuZGVzY3JpcHRpb25cblxuICAgIGlmIChjb250YWluZXJXaWR0aCA8IDkwMCkge1xuICAgICAgbGlua01vZGFsLmFwcGVuZENoaWxkKHRlY2hJY29ucylcbiAgICAgIGxpbmtNb2RhbC5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbilcbiAgICB9IGVsc2Uge1xuICAgICAgbGlua01vZGFsLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKVxuICAgICAgbGlua01vZGFsLmFwcGVuZENoaWxkKHRlY2hJY29ucylcbiAgICB9XG5cbiAgICBjb25zdCBsaW5rTW9kYWxJY29ucyA9IGxpbmtNb2RhbC5hcHBlbmRDaGlsZChjZWNsKCdkaXYnLCAnbGluay1tb2RhbC1pY29ucycpKVxuXG4gICAgbGlua01vZGFsSWNvbnMuaW5uZXJIVE1MID1cbiAgICAgIGA8ZGl2PjxhIGhyZWY9JHtwcm9qZWN0LnNpdGVfdXJsfSB0YXJnZXQ9J19ibGFuayc+PGkgY2xhc3M9XCJmYXMgZmEtaG9tZSBmYS1md1wiPjwvaT48L2E+XG4gICAgPHAgY2xhc3M9J2hvbWUtdG9vbC10aXAnPndlYnNpdGU8L3A+PC9kaXY+XG5cbiAgICA8ZGl2PjxhIGhyZWY9JHtwcm9qZWN0LmdpdGh1Yl91cmx9IHRhcmdldD0nX2JsYW5rJz48aSBjbGFzcz1cImZhYiBmYS1naXRodWJcIj48L2k+PC9hPlxuICAgIDxwIGNsYXNzPSdnaXRodWItdG9vbC10aXAnPmdpdGh1YjwvcD48L2Rpdj5gXG5cblxuICAgIC8qKioqKioqKioqKioqKlxuICAgIEFERCBMSU5LIE1PREFMXG4gICAgKioqKioqKioqKioqKioqL1xuICAgIGltZ1dyYXBwZXJbaW5kZXhdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdpcyBpdCBzbycpXG4gICAgIFxuICAgICAgaWYgKGJvb2wgPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgIGJvb2wgPSBcImZhbHNlXCJcbiAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5jbGFzc0xpc3QuYWRkKFwiY2xvc2UtY3VydGFpblwiKVxuICAgICAgICBpbm5lckltZ1dyYXBbaW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuLWN1cnRhaW5cIilcbiAgICAgICAgLy8gY29uc29sZS5sb2cobGFzdENoaWxkKVxuICAgICAgICBpbm5lckltZ1dyYXBbaW5kZXhdLmxhc3RDaGlsZC5yZW1vdmUoKVxuICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5sYXN0Q2hpbGQucmVtb3ZlKClcblxuXG4gICAgICAgIGltZ1dyYXBwZXJbaW5kZXhdLnN0eWxlLndpZHRoID0gJzgwJSdcbiAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uc3R5bGUucGFkZGluZyA9ICc2JSdcbiAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uc3R5bGUubWFyZ2luID0gJzAnXG5cbiAgICAgICAgcHJvamVjdFdyYXAuc3R5bGUubWFyZ2luID0gJzAgMTAlIDMlIDEwJSdcbiAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5zdHlsZS53aWR0aCA9ICcxMDAlJ1xuXG4gICAgICAgIHByb2plY3RXcmFwLmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9qZWN0LXdyYXAtY2xpY2tcIilcblxuICAgICAgXG5cbiAgICAgIH0gZWxzZSBpZiAoYm9vbCA9PT0gXCJmYWxzZVwiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGJvb2wpXG4gICAgICAgIGJvb2wgPSBcInRydWVcIlxuICAgICAgICBpbm5lckltZ1dyYXBbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJvcGVuLWN1cnRhaW5cIilcbiAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKFwiY2xvc2UtY3VydGFpblwiKVxuICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5hcHBlbmRDaGlsZChsaW5rTW9kYWwpXG5cblxuICAgICAgICBpZiAoY29udGFpbmVyV2lkdGggPCA5MDApIHtcbiAgICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbidcbiAgICAgICAgICBsaW5rTW9kYWwuc3R5bGUud2lkdGggPSAnOTAlJ1xuICAgICAgICAgIHRlY2hJY29ucy5zdHlsZS53aWR0aCA9ICc4MCUnXG4gICAgICAgICAgbGlua01vZGFsLnN0eWxlLm1hcmdpblRvcCA9ICc1JSdcbiAgICAgICAgICBsaW5rTW9kYWwuc3R5bGUuYmFja2dyb3VuZCA9ICdyZ2IoMjQwLCAyNTMsIDI1MyknXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5zdHlsZS53aWR0aCA9ICc5MCUnXG4gICAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uc3R5bGUucGFkZGluZyA9ICcyJSdcbiAgICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5zdHlsZS5tYXJnaW4gPSAnMCBhdXRvJ1xuICAgICAgICAgIHByb2plY3RXcmFwLnN0eWxlLm1hcmdpbiA9ICcwIDElJ1xuXG4gICAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5zdHlsZS53aWR0aCA9ICc5OSUnXG4gICAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5zdHlsZS5oZWlnaHQgPSAnOTklJ1xuICAgICAgICAgIC8vIFxuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoY29udGFpbmVyV2lkdGggPCA5MDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnOTAwLScpXG4gICAgICAgICAgaW1hZ2UuYXBwZW5kQ2hpbGQodGVjaEljb25zKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCc5MDArJylcbiAgICAgICAgICBpbm5lckltZ1dyYXBbaW5kZXhdLmFwcGVuZENoaWxkKHRlY2hJY29ucylcblxuICAgICAgICB9XG5cblxuXG4gICAgICAgIGNvbnNvbGUubG9nKGltYWdlKVxuXG4gICAgICAgIGxldCBpdyA9IGltZ1dyYXBwZXJbaW5kZXhdLnN0eWxlXG4gICAgICAgIGl3LnNldFByb3BlcnR5KFxuICAgICAgICAgIFwiLS1hbmltYXRpb25cIixcbiAgICAgICAgICBcImFuaW1hdGUtaW1nLXdyYXBwZXIgMS41cyBsaW5lYXIgZm9yd2FyZHNcIlxuICAgICAgICApXG4gICAgICAgIHByb2plY3RXcmFwLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXdyYXAtY2xpY2tcIilcblxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvKioqKioqKioqKioqKioqKioqKlxuICAgICBFRElUIFBST0pFQ1QgQlVUVE9OXG4gICAgKioqKioqKioqKioqKioqKioqKiovXG4gICBcbiAgICBpZiAodXNlciAmJiB1c2VyLmlzQWRtaW4pIHtcblxuICAgICAgY29uc3QgZWRpdFByb2plY3RXcmFwcGVyID0gY2VjbChcImRpdlwiLCBcImVkaXQtcHJvamVjdC13cmFwcGVyXCIpXG4gICAgICBjb25zdCBlZGl0QnV0dG9uID0gQnV0dG9uKFwic2hvdy1lZGl0LWJ1dHRvblwiLCBcInN1Ym1pdFwiLCBcInVwZGF0ZVwiKVxuICAgICAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0V3JhcC5sYXN0Q2hpbGQuY2xhc3NOYW1lKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgcHJvamVjdFdyYXAubGFzdENoaWxkLmNsYXNzTmFtZSAhPT0gXCJlZGl0LXByb2plY3QtZm9ybVwiXG4gICAgICAgIClcbiAgICAgICAgICBFZGl0UHJvamVjdChwcm9qZWN0V3JhcCwgcHJvamVjdClcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcHJvamVjdFdyYXAubGFzdENoaWxkLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBlZGl0UHJvamVjdFdyYXBwZXIuYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbilcblxuICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgIERFTEVURSBQUk9KRUNUIEJVVFRPTlxuICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gQnV0dG9uKFwiZGVsZXRlLXByb2plY3RcIiwgXCJzdWJtaXRcIiwgXCJkZWxldGVcIilcbiAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgYW5zd2VyID0gY29uZmlybShgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSAke3Byb2plY3QubmFtZX0/YClcbiAgICAgICAgYW5zd2VyICYmIGF3YWl0IGRlbGV0ZVByb2plY3QocHJvamVjdC5pZClcbiAgICAgICAgYW5zd2VyICYmIGF3YWl0IFByb2plY3RzKClcbiAgICAgIH0pXG4gICAgICBlZGl0UHJvamVjdFdyYXBwZXIuYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uKVxuICAgICAgcHJvamVjdFdyYXAuYXBwZW5kQ2hpbGQoZWRpdFByb2plY3RXcmFwcGVyKVxuICAgIH1cbiAgfSlcblxuICAvKioqKioqKioqKipcbiAgQUREIFBST0pFQ1QgXG4gICoqKioqKioqKioqKi9cbiAgaWYgKHVzZXIgJiYgdXNlci5pc0FkbWluKSB7XG5cbiAgICBsZXQgYWRkQnRuID0gQnV0dG9uKFwic2hvdy1hZGQtZm9ybVwiLCBcInN1Ym1pdFwiLCBcImFkZCBwcm9qZWN0XCIpXG4gICAgYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhtYWluQ29udGVudC5sYXN0Q2hpbGQucHJldmlvdXNTaWJsaW5nLmNsYXNzTmFtZSlcbiAgICAgIGlmIChtYWluQ29udGVudC5sYXN0Q2hpbGQucHJldmlvdXNTaWJsaW5nLmNsYXNzTmFtZSA9PT0gXCJzaG93LWFkZC1mb3JtXCIpXG4gICAgICAgIEVkaXRQcm9qZWN0KG1haW5Db250ZW50LCByZXNwWzBdLCBcImFkZFByb2plY3RcIilcbiAgICAgIGVsc2Uge1xuICAgICAgICBtYWluQ29udGVudC5sYXN0Q2hpbGQucmVtb3ZlKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgYWMobWFpbkNvbnRlbnQsIGFkZEJ0bilcbiAgfVxuXG4gIG1haW5Db250ZW50LmFwcGVuZENoaWxkKEZvb3RlcigpKVxuXG5cbn1cbiIsImltcG9ydCB7IEZvcm0sIElucHV0LCBCdXR0b24sIENoZWNrYm94LCBMYWJlbCB9IGZyb20gXCIuLi9TaGFyZWQvRm9ybS5qc1wiXG5pbXBvcnQgeyBnZXRUZWNobm9sb2dpZXMgfSBmcm9tIFwiLi4vU2VydmljZXMvQXBpVGVjaC5qc1wiXG5pbXBvcnQge1xuICBnZXRQcm9qZWN0LFxuICBhZGRQcm9qZWN0IGFzIGFkZE5ld1Byb2plY3QsXG4gIHVwZGF0ZVByb2plY3QsXG4gIGRlbGV0ZVByb2plY3QsXG4gIHVwZGF0ZVByb2plY3RUZWNobm9sb2dpZXMsXG59IGZyb20gXCIuLi9TZXJ2aWNlcy9BcGlQcm9qZWN0LmpzXCJcbmltcG9ydCB7IFByb2plY3RzIH0gZnJvbSBcIi4vUHJvamVjdHMuanNcIlxuaW1wb3J0IHsgYWMsIGNlY2wgfSBmcm9tIFwiLi4vSGVscGVycy9kb21IZWxwZXIuanNcIlxuXG5leHBvcnQgY29uc3QgRWRpdFByb2plY3QgPSBhc3luYyAocHJvamVjdFdyYXAsIHByb2plY3QsIGFkZFByb2plY3QpID0+IHtcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxuICBNQUtFIEFORCBTRVQgRk9STSAgSU5QVVRTXG4gICoqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIGNvbnNvbGUubG9nKFwiYWRkXCIsIGFkZFByb2plY3QpXG4gIGlmIChhZGRQcm9qZWN0ID09PSBcImFkZFByb2plY3RcIikge1xuICAgIGZvciAobGV0IGl0ZW0gaW4gcHJvamVjdCkge1xuICAgICAgcHJvamVjdFtpdGVtXSA9IFwiXCJcbiAgICB9XG4gIH1cbiAgbGV0IG5ld1Byb2plY3QgPSB7fVxuXG4gIGxldCBoYW5kbGVDaGFuZ2UgPSAoZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0Lm5hbWUsIGUudGFyZ2V0LnZhbHVlKVxuICAgIG5ld1Byb2plY3RbZS50YXJnZXQubmFtZV0gPSBlLnRhcmdldC52YWx1ZVxuICAgIGNvbnNvbGUubG9nKCdjbW9uJywgbmV3UHJvamVjdClcbiAgfVxuXG4gIGxldCBmb3JtID0gRm9ybShcImVkaXQtcHJvamVjdC1mb3JtXCIpXG4gIGxldCBpbnB1dHMgPSBjZWNsKCdkaXYnLCAnZWRpdC1mb3JtLWlucHV0cycpXG4gIGZvcm0uYXBwZW5kQ2hpbGQoaW5wdXRzKVxuICBPYmplY3Qua2V5cyhwcm9qZWN0KS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpZiAoXG4gICAgICBrZXkgIT09IFwiaWRcIiAmJlxuICAgICAga2V5ICE9PSBcInRlY2hub2xvZ2llc1wiICYmXG4gICAgICBrZXkgIT09IFwiY3JlYXRlZF9hdFwiICYmXG4gICAgICBrZXkgIT09IFwidXBkYXRlZF9hdFwiXG4gICAgKSB7XG4gICAgICBuZXdQcm9qZWN0W2tleV0gPSBwcm9qZWN0W2tleV1cbiAgICAgIGNvbnN0IGlucHV0ID0gSW5wdXQoe1xuICAgICAgICBjbGFzc05hbWU6IFwiZWRpdC1mb3JtLWlucHV0XCIsXG4gICAgICAgIG5hbWU6IGtleSxcbiAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgIHZhbHVlOiBhZGRQcm9qZWN0ID09PSBcImFkZFByb2plY3RcIiA/IFwiXCIgOiBuZXdQcm9qZWN0W2tleV0sXG4gICAgICAgIHBsYWNlaG9sZGVyOiBrZXksXG4gICAgICAgIGhhbmRsZUNoYW5nZTogaGFuZGxlQ2hhbmdlLFxuICAgICAgfSlcbiAgICAgIGlucHV0cy5hcHBlbmRDaGlsZChpbnB1dClcbiAgICB9XG4gIH0pXG5cbiAgLyoqKioqKioqKioqKioqXG4gICBTRVQgQ0hFQ0tCT1hFU1xuICAqKioqKioqKioqKioqKiovXG4gIGNvbnN0IGNoZWNrcyA9IGNlY2woJ2RpdicsICdlZGl0LWZvcm0tY2hlY2tib3hlcycpXG4gIGZvcm0uYXBwZW5kQ2hpbGQoY2hlY2tzKVxuICBsZXQgdGVjaG5vbG9naWVzID0gYXdhaXQgZ2V0VGVjaG5vbG9naWVzKClcbiAgdGVjaG5vbG9naWVzLm1hcCgodGVjaG5vbG9neSkgPT4ge1xuXG4gICAgbGV0IGNoZWNrZWRcbiAgICBhZGRQcm9qZWN0ID09PSB1bmRlZmluZWQgJiZcbiAgICAgIHByb2plY3QudGVjaG5vbG9naWVzLmZvckVhY2goKHByb2plY3RUZWNobm9sb2d5KSA9PiB7XG4gICAgICAgIGlmICh0ZWNobm9sb2d5Lm5hbWUgPT09IHByb2plY3RUZWNobm9sb2d5Lm5hbWUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0ZWNobm9sb2d5Lm5hbWUsIHByb2plY3RUZWNobm9sb2d5Lm5hbWUpXG4gICAgICAgICAgY2hlY2tlZCA9IFwiY2hlY2tlZFwiXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgbGV0IGJ4ID0gQ2hlY2tib3goe1xuICAgICAgY2xhc3NOYW1lOiBcImVkaXQtcHJvamVjdC1jaGtib3hcIixcbiAgICAgIG5hbWU6IHRlY2hub2xvZ3kubmFtZSxcbiAgICAgIGlkOiB0ZWNobm9sb2d5Lm5hbWUsXG4gICAgICB2YWx1ZTogdGVjaG5vbG9neS5pZCxcbiAgICAgIGNoZWNrZWQ6IGFkZFByb2plY3QgPT09IFwiYWRkUHJvamVjdFwiID8gXCJcIiA6IGNoZWNrZWQsXG5cbiAgICB9KVxuICAgIGNoZWNrcy5hcHBlbmRDaGlsZChieClcbiAgICBjaGVja3MuYXBwZW5kQ2hpbGQoTGFiZWwoXCJ0ZWNoLWJveC1sYWJlbFwiLCB0ZWNobm9sb2d5Lm5hbWUsIFwidGVjaC1ib3hcIikpXG5cbiAgfSlcbiAgZm9ybS5hcHBlbmRDaGlsZChcbiAgICBCdXR0b24oXG4gICAgICBcImVkaXQtcHJvamVjdC1idXR0b25cIixcbiAgICAgIFwic3VibWl0XCIsXG4gICAgICBhZGRQcm9qZWN0ID09PSBcImFkZFByb2plY3RcIiA/IFwiYWRkIG5ldyBwcm9qZWN0XCIgOiBcInN1Ym1pdFwiXG4gICAgKVxuICApXG5cblxuICBhYyhwcm9qZWN0V3JhcCwgZm9ybSlcblxuXG4gIC8qKioqKioqKioqXG4gICBTVUJNSVQgRk9STVxuICAqKioqKioqKioqKi9cbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGFzeW5jIChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnNvbGUubG9nKFwiYWRkXCIsIGFkZFByb2plY3QpXG5cbiAgICBjb25zdCBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWRcIilcbiAgICBjb25zb2xlLmxvZyhjaGVja2JveGVzLCBuZXdQcm9qZWN0KVxuICAgIG5ld1Byb2plY3QudGVjaG5vbG9naWVzID0gW11cbiAgICBjaGVja2JveGVzLmZvckVhY2goKGJveCkgPT4ge1xuICAgICAgbmV3UHJvamVjdC50ZWNobm9sb2dpZXMucHVzaChib3gudmFsdWUpXG4gICAgfSlcbiAgICBjb25zb2xlLmxvZyhcImFkZFwiLCBuZXdQcm9qZWN0KVxuICAgIGFkZFByb2plY3QgPT09IFwiYWRkUHJvamVjdFwiXG4gICAgICA/IGF3YWl0IGFkZE5ld1Byb2plY3QobmV3UHJvamVjdClcbiAgICAgIDogYXdhaXQgdXBkYXRlUHJvamVjdChuZXdQcm9qZWN0LCBwcm9qZWN0LmlkKVxuXG4gICAgYXdhaXQgUHJvamVjdHMoKVxuICB9KVxufVxuIiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vcHJvamVjdHMuc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxudmFyIGV4cG9ydGVkID0gY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHt9O1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRlZDsiLCJcbmV4cG9ydCBjb25zdCBCYXNlVXJsID0gKCkgPT4ge1xuXG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnaHR0cHM6Ly9wb3J0Zm9saW8tbWljay1zZXJ2ZXIuaGVyb2t1YXBwLmNvbScgOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwJ1xuXG59Il0sInNvdXJjZVJvb3QiOiIifQ==