(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{101:function(e,t,n){"use strict";n.r(t),n.d(t,"EditProject",(function(){return l}));var o=n(3),a=n(92),c=n(95),i=n(98),s=n(0);const l=async(e,t,n)=>{if(console.log("add",n),"addProject"===n)for(let e in t)t[e]="";let l={},d=e=>{console.log(e.target.name,e.target.value),l[e.target.name]=e.target.value,console.log("cmon",l)},r=Object(o.c)("edit-project-form"),p=Object(s.c)("div","edit-form-inputs");r.appendChild(p),Object.keys(t).forEach(e=>{if("id"!==e&&"technologies"!==e&&"created_at"!==e&&"updated_at"!==e){l[e]=t[e];const a=Object(o.d)({className:"edit-form-input",name:e,type:"text",value:"addProject"===n?"":l[e],placeholder:e,handleChange:d});p.appendChild(a)}});const h=Object(s.c)("div","edit-form-checkboxes");r.appendChild(h),(await Object(a.a)()).map(e=>{let a;void 0===n&&t.technologies.forEach(t=>{e.name===t.name&&(console.log(e.name,t.name),a="checked")});let c=Object(o.b)({className:"edit-project-chkbox",name:e.name,id:e.name,value:e.id,checked:"addProject"===n?"":a});h.appendChild(c),h.appendChild(Object(o.e)("tech-box-label",e.name,"tech-box"))}),r.appendChild(Object(o.a)("edit-project-button","submit","addProject"===n?"add new project":"submit")),Object(s.b)(e,r),r.addEventListener("submit",async e=>{e.preventDefault(),console.log("add",n);const o=document.querySelectorAll("input[type=checkbox]:checked");console.log(o,l),l.technologies=[],o.forEach(e=>{l.technologies.push(e.value)}),console.log("add",l),"addProject"===n?await Object(c.a)(l):await Object(c.d)(l,t.id),await Object(i.Projects)()})}},102:function(e,t,n){var o=n(1),a=n(103);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var c={insert:"head",singleton:!1},i=(o(a,c),a.locals?a.locals:{});e.exports=i},103:function(e,t,n){},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=()=>"https://portfolio-mick-server.herokuapp.com"},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var o=n(91);const a=Object(o.a)();let c=async()=>await fetch(`${a}/technologies`).then(e=>e.json()).then(e=>e);const i=async(e,t)=>{await fetch(`${a}/technologies/${t}`,{method:"put",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e)}},93:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l}));var o=n(91);const a=Object(o.a)();const c=async e=>(console.log(JSON.stringify(e)),await fetch(a+"/users",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>(localStorage.setItem("authToken",e.token),e))),i=async e=>await fetch(a+"/auth/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>(localStorage.setItem("authToken",e.token),e)),s=async()=>{if(localStorage.getItem("authToken")){return await fetch(a+"/auth/verify",{method:"get",headers:(e={"Content-Type":"application/json"},localStorage.authToken?{...e,Authorization:`Bearer ${localStorage.authToken}`}:e)}).then(e=>e.json()).then(e=>e)}var e;return!1},l=async()=>(localStorage.removeItem("authToken"),{"Content-Type":"application/json"},"logged out")},95:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l}));var o=n(91);const a=Object(o.a)();let c=async()=>await fetch(`${a}/projects`).then(e=>e.json()).then(e=>e);const i=async e=>{const t=await fetch(`${a}/projects`,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e);console.log(t)},s=async(e,t)=>{await fetch(`${a}/projects/${t}`,{method:"put",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e)},l=async e=>{const t=await fetch(`${a}/projects/${e}`,{method:"delete",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e);console.log(t)}},98:function(e,t,n){"use strict";n.r(t),n.d(t,"Projects",(function(){return p}));var o=n(0),a=n(93),c=(n(92),n(94)),i=n(4),s=n(95),l=n(3),d=n(101);n(102);const r=e=>{for(;e.childNodes.length;)e.removeChild(e.lastChild)};async function p(){const e=Object(o.e)(".scrollable-content");r(e),e.appendChild(Object(o.c)("div","loading")).innerHTML="loading...";const t=await Object(s.c)();r(e);const n=e.clientWidth;if(t.forEach(async(t,i)=>{const r=e.appendChild(Object(o.c)("div","project-wrap")),h=r.appendChild(Object(c.a)(`src/img/${t.img_url}`,t.name,!0,t.site_url,t.build_date));console.log(h);let u="false",j=Object(o.c)("div","link-modal"),b=Object(o.f)(".img-wrapper"),f=Object(o.f)(".inner-img-wrap"),g=Object(o.c)("div","tech-icons");t.technologies.forEach(e=>{g.appendChild(Object(o.c)("img","tech-icon")).src=`src/img/${e.icon_url}`});let m=Object(o.c)("div","description");if(m.innerHTML=t.description,n<900?(j.appendChild(g),j.appendChild(m)):(j.appendChild(m),j.appendChild(g)),j.appendChild(Object(o.c)("div","link-modal-icons")).innerHTML=`<div><a href=${t.site_url} target='_blank'><i class="fas fa-home fa-fw"></i></a>\n    <p class='home-tool-tip'>website</p></div>\n\n    <div><a href=${t.github_url} target='_blank'><i class="fab fa-github"></i></a>\n    <p class='github-tool-tip'>github</p></div>`,console.log(f[0].children[1]),b[i].addEventListener("click",async()=>{if("true"===u)u="false",f[i].classList.add("close-curtain"),f[i].classList.remove("open-curtain"),b[i].lastChild.remove(),b[i].style.width="80%",b[i].style.padding="6%",b[i].style.margin="0",r.style.margin="0 10% 3% 10%",f[i].style.width="100%",r.classList.remove("project-wrap-click"),h.lastChild.remove();else if("false"===u){console.log(u),u="true",f[i].classList.add("open-curtain"),f[i].classList.remove("close-curtain"),b[i].appendChild(j),n<900?(b[i].style.flexDirection="column",j.style.width="90%",g.style.width="80%",j.style.marginTop="5%",j.style.background="rgb(240, 253, 253)"):(b[i].style.width="90%",b[i].style.padding="2%",b[i].style.margin="0 auto",r.style.margin="0 1%",f[i].style.width="99%",f[i].style.height="99%"),n<900?(console.log("900-"),h.appendChild(g)):(console.log("900+"),f[i].appendChild(g)),console.log(h),b[i].style.setProperty("--animation","animate-img-wrapper 1.5s linear forwards"),r.classList.add("project-wrap-click")}}),await Object(a.d)()){const e=Object(o.c)("div","edit-project-wrapper"),n=Object(l.a)("show-edit-button","submit","update");n.addEventListener("click",()=>{console.log(r.lastChild.className),"edit-project-form"!==r.lastChild.className?Object(d.EditProject)(r,t):r.lastChild.remove()}),e.appendChild(n);const a=Object(l.a)("delete-project","submit","delete");a.addEventListener("click",async()=>{let e=confirm(`Are you sure you want to delete ${t.name}?`);e&&await Object(s.b)(t.id),e&&await p()}),e.appendChild(a),r.appendChild(e)}}),await Object(a.d)()){let n=Object(l.a)("show-add-form","submit","add project");n.addEventListener("click",()=>{console.log(e.lastChild.previousSibling.className),"show-add-form"===e.lastChild.previousSibling.className?Object(d.EditProject)(e,t[0],"addProject"):e.lastChild.remove()}),Object(o.b)(e,n)}e.appendChild(Object(i.a)())}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Qcm9qZWN0cy9FZGl0UHJvamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Qcm9qZWN0cy9wcm9qZWN0cy5zY3NzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1NlcnZpY2VzL0Jhc2VVcmwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvU2VydmljZXMvQXBpVGVjaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9TZXJ2aWNlcy9BcGlBdXRoLmpzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1NlcnZpY2VzL0FwaVByb2plY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvUHJvamVjdHMvUHJvamVjdHMuanMiXSwibmFtZXMiOlsiRWRpdFByb2plY3QiLCJhc3luYyIsInByb2plY3RXcmFwIiwicHJvamVjdCIsImFkZFByb2plY3QiLCJjb25zb2xlIiwibG9nIiwiaXRlbSIsIm5ld1Byb2plY3QiLCJoYW5kbGVDaGFuZ2UiLCJlIiwidGFyZ2V0IiwibmFtZSIsInZhbHVlIiwiZm9ybSIsImlucHV0cyIsImFwcGVuZENoaWxkIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJpbnB1dCIsImNsYXNzTmFtZSIsInR5cGUiLCJwbGFjZWhvbGRlciIsImNoZWNrcyIsIm1hcCIsInRlY2hub2xvZ3kiLCJjaGVja2VkIiwidW5kZWZpbmVkIiwidGVjaG5vbG9naWVzIiwicHJvamVjdFRlY2hub2xvZ3kiLCJieCIsImlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiY2hlY2tib3hlcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImJveCIsInB1c2giLCJhcGkiLCJjb250ZW50IiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJtb2R1bGUiLCJpIiwib3B0aW9ucyIsImV4cG9ydGVkIiwibG9jYWxzIiwiZXhwb3J0cyIsIkJhc2VVcmwiLCJiYXNlVXJsIiwiZ2V0VGVjaG5vbG9naWVzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwianNvbiIsImFucyIsInVwZGF0ZVRlY2hub2xvZ3kiLCJib2R5IiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJkYXRhIiwic2lnblVwIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInRva2VuIiwibG9naW4iLCJ2ZXJpZnkiLCJnZXRJdGVtIiwiYXV0aFRva2VuIiwiQXV0aG9yaXphdGlvbiIsImxvZ291dCIsInJlbW92ZUl0ZW0iLCJnZXRQcm9qZWN0cyIsInVwZGF0ZVByb2plY3QiLCJkZWxldGVQcm9qZWN0IiwiY2xlYXJQYWdlIiwiZWxlbWVudCIsImNoaWxkTm9kZXMiLCJsZW5ndGgiLCJyZW1vdmVDaGlsZCIsImxhc3RDaGlsZCIsIlByb2plY3RzIiwibWFpbkNvbnRlbnQiLCJpbm5lckhUTUwiLCJyZXNwIiwiY29udGFpbmVyV2lkdGgiLCJjbGllbnRXaWR0aCIsImluZGV4IiwiaW1hZ2UiLCJpbWdfdXJsIiwic2l0ZV91cmwiLCJidWlsZF9kYXRlIiwiYm9vbCIsImxpbmtNb2RhbCIsImltZ1dyYXBwZXIiLCJpbm5lckltZ1dyYXAiLCJ0ZWNoSWNvbnMiLCJpY29uIiwic3JjIiwiaWNvbl91cmwiLCJkZXNjcmlwdGlvbiIsImdpdGh1Yl91cmwiLCJjaGlsZHJlbiIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInN0eWxlIiwid2lkdGgiLCJwYWRkaW5nIiwibWFyZ2luIiwiZmxleERpcmVjdGlvbiIsIm1hcmdpblRvcCIsImJhY2tncm91bmQiLCJoZWlnaHQiLCJzZXRQcm9wZXJ0eSIsImVkaXRQcm9qZWN0V3JhcHBlciIsImVkaXRCdXR0b24iLCJkZWxldGVCdXR0b24iLCJhbnN3ZXIiLCJjb25maXJtIiwiYWRkQnRuIiwicHJldmlvdXNTaWJsaW5nIl0sIm1hcHBpbmdzIjoiMEZBQUEsNkZBWU8sTUFBTUEsRUFB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TUFFbEJrQyxFQUFtQnpHLFlBQVkyRyxHQUUvQnpILEVBQVljLFlBQVl5RyxZQU9sQixjQUFVLENBRWxCLElBQUlLLEVBQVMsWUFBTyxnQkFBaUIsU0FBVSxlQUMvQ0EsRUFBTzVGLGlCQUFpQixRQUFTLEtBQy9CN0IsUUFBUUMsSUFBSWtGLEVBQVlGLFVBQVV5QyxnQkFBZ0J6RyxXQUNNLGtCQUFwRGtFLEVBQVlGLFVBQVV5QyxnQkFBZ0J6RyxVQUN4QyxzQkFBWWtFLEVBQWFFLEVBQUssR0FBSSxjQUVsQ0YsRUFBWUYsVUFBVXlCLFdBSTFCLFlBQUd2QixFQUFhc0MsR0FTbEJ0QyxFQUFZeEUsWUFBWSIsImZpbGUiOiIxLmU4NGQ5ZGRmNGU5NWUzYWQ2M2Y0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRm9ybSwgSW5wdXQsIEJ1dHRvbiwgQ2hlY2tib3gsIExhYmVsIH0gZnJvbSBcIi4uL1NoYXJlZC9Gb3JtLmpzXCJcbmltcG9ydCB7IGdldFRlY2hub2xvZ2llcyB9IGZyb20gXCIuLi9TZXJ2aWNlcy9BcGlUZWNoLmpzXCJcbmltcG9ydCB7XG4gIGdldFByb2plY3QsXG4gIGFkZFByb2plY3QgYXMgYWRkTmV3UHJvamVjdCxcbiAgdXBkYXRlUHJvamVjdCxcbiAgZGVsZXRlUHJvamVjdCxcbiAgdXBkYXRlUHJvamVjdFRlY2hub2xvZ2llcyxcbn0gZnJvbSBcIi4uL1NlcnZpY2VzL0FwaVByb2plY3QuanNcIlxuaW1wb3J0IHsgUHJvamVjdHMgfSBmcm9tIFwiLi9Qcm9qZWN0cy5qc1wiXG5pbXBvcnQgeyBhYywgY2VjbCB9IGZyb20gXCIuLi9IZWxwZXJzL2RvbUhlbHBlci5qc1wiXG5cbmV4cG9ydCBjb25zdCBFZGl0UHJvamVjdCA9IGFzeW5jIChwcm9qZWN0V3JhcCwgcHJvamVjdCwgYWRkUHJvamVjdCkgPT4ge1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqXG4gIE1BS0UgQU5EIFNFVCBGT1JNICBJTlBVVFNcbiAgKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgY29uc29sZS5sb2coXCJhZGRcIiwgYWRkUHJvamVjdClcbiAgaWYgKGFkZFByb2plY3QgPT09IFwiYWRkUHJvamVjdFwiKSB7XG4gICAgZm9yIChsZXQgaXRlbSBpbiBwcm9qZWN0KSB7XG4gICAgICBwcm9qZWN0W2l0ZW1dID0gXCJcIlxuICAgIH1cbiAgfVxuICBsZXQgbmV3UHJvamVjdCA9IHt9XG5cbiAgbGV0IGhhbmRsZUNoYW5nZSA9IChlKSA9PiB7XG4gICAgY29uc29sZS5sb2coZS50YXJnZXQubmFtZSwgZS50YXJnZXQudmFsdWUpXG4gICAgbmV3UHJvamVjdFtlLnRhcmdldC5uYW1lXSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgY29uc29sZS5sb2coJ2Ntb24nLCBuZXdQcm9qZWN0KVxuICB9XG5cbiAgbGV0IGZvcm0gPSBGb3JtKFwiZWRpdC1wcm9qZWN0LWZvcm1cIilcbiAgbGV0IGlucHV0cyA9IGNlY2woJ2RpdicsICdlZGl0LWZvcm0taW5wdXRzJylcbiAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dHMpXG4gIE9iamVjdC5rZXlzKHByb2plY3QpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChcbiAgICAgIGtleSAhPT0gXCJpZFwiICYmXG4gICAgICBrZXkgIT09IFwidGVjaG5vbG9naWVzXCIgJiZcbiAgICAgIGtleSAhPT0gXCJjcmVhdGVkX2F0XCIgJiZcbiAgICAgIGtleSAhPT0gXCJ1cGRhdGVkX2F0XCJcbiAgICApIHtcbiAgICAgIG5ld1Byb2plY3Rba2V5XSA9IHByb2plY3Rba2V5XVxuICAgICAgY29uc3QgaW5wdXQgPSBJbnB1dCh7XG4gICAgICAgIGNsYXNzTmFtZTogXCJlZGl0LWZvcm0taW5wdXRcIixcbiAgICAgICAgbmFtZToga2V5LFxuICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgdmFsdWU6IGFkZFByb2plY3QgPT09IFwiYWRkUHJvamVjdFwiID8gXCJcIiA6IG5ld1Byb2plY3Rba2V5XSxcbiAgICAgICAgcGxhY2Vob2xkZXI6IGtleSxcbiAgICAgICAgaGFuZGxlQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsXG4gICAgICB9KVxuICAgICAgaW5wdXRzLmFwcGVuZENoaWxkKGlucHV0KVxuICAgIH1cbiAgfSlcblxuICAvKioqKioqKioqKioqKipcbiAgIFNFVCBDSEVDS0JPWEVTXG4gICoqKioqKioqKioqKioqKi9cbiAgY29uc3QgY2hlY2tzID0gY2VjbCgnZGl2JywgJ2VkaXQtZm9ybS1jaGVja2JveGVzJylcbiAgZm9ybS5hcHBlbmRDaGlsZChjaGVja3MpXG4gIGxldCB0ZWNobm9sb2dpZXMgPSBhd2FpdCBnZXRUZWNobm9sb2dpZXMoKVxuICB0ZWNobm9sb2dpZXMubWFwKCh0ZWNobm9sb2d5KSA9PiB7XG5cbiAgICBsZXQgY2hlY2tlZFxuICAgIGFkZFByb2plY3QgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgcHJvamVjdC50ZWNobm9sb2dpZXMuZm9yRWFjaCgocHJvamVjdFRlY2hub2xvZ3kpID0+IHtcbiAgICAgICAgaWYgKHRlY2hub2xvZ3kubmFtZSA9PT0gcHJvamVjdFRlY2hub2xvZ3kubmFtZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRlY2hub2xvZ3kubmFtZSwgcHJvamVjdFRlY2hub2xvZ3kubmFtZSlcbiAgICAgICAgICBjaGVja2VkID0gXCJjaGVja2VkXCJcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICBsZXQgYnggPSBDaGVja2JveCh7XG4gICAgICBjbGFzc05hbWU6IFwiZWRpdC1wcm9qZWN0LWNoa2JveFwiLFxuICAgICAgbmFtZTogdGVjaG5vbG9neS5uYW1lLFxuICAgICAgaWQ6IHRlY2hub2xvZ3kubmFtZSxcbiAgICAgIHZhbHVlOiB0ZWNobm9sb2d5LmlkLFxuICAgICAgY2hlY2tlZDogYWRkUHJvamVjdCA9PT0gXCJhZGRQcm9qZWN0XCIgPyBcIlwiIDogY2hlY2tlZCxcblxuICAgIH0pXG4gICAgY2hlY2tzLmFwcGVuZENoaWxkKGJ4KVxuICAgIGNoZWNrcy5hcHBlbmRDaGlsZChMYWJlbChcInRlY2gtYm94LWxhYmVsXCIsIHRlY2hub2xvZ3kubmFtZSwgXCJ0ZWNoLWJveFwiKSlcblxuICB9KVxuICBmb3JtLmFwcGVuZENoaWxkKFxuICAgIEJ1dHRvbihcbiAgICAgIFwiZWRpdC1wcm9qZWN0LWJ1dHRvblwiLFxuICAgICAgXCJzdWJtaXRcIixcbiAgICAgIGFkZFByb2plY3QgPT09IFwiYWRkUHJvamVjdFwiID8gXCJhZGQgbmV3IHByb2plY3RcIiA6IFwic3VibWl0XCJcbiAgICApXG4gIClcblxuXG4gIGFjKHByb2plY3RXcmFwLCBmb3JtKVxuXG5cbiAgLyoqKioqKioqKipcbiAgIFNVQk1JVCBGT1JNXG4gICoqKioqKioqKioqL1xuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYXN5bmMgKGV2dCkgPT4ge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc29sZS5sb2coXCJhZGRcIiwgYWRkUHJvamVjdClcblxuICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbdHlwZT1jaGVja2JveF06Y2hlY2tlZFwiKVxuICAgIGNvbnNvbGUubG9nKGNoZWNrYm94ZXMsIG5ld1Byb2plY3QpXG4gICAgbmV3UHJvamVjdC50ZWNobm9sb2dpZXMgPSBbXVxuICAgIGNoZWNrYm94ZXMuZm9yRWFjaCgoYm94KSA9PiB7XG4gICAgICBuZXdQcm9qZWN0LnRlY2hub2xvZ2llcy5wdXNoKGJveC52YWx1ZSlcbiAgICB9KVxuICAgIGNvbnNvbGUubG9nKFwiYWRkXCIsIG5ld1Byb2plY3QpXG4gICAgYWRkUHJvamVjdCA9PT0gXCJhZGRQcm9qZWN0XCJcbiAgICAgID8gYXdhaXQgYWRkTmV3UHJvamVjdChuZXdQcm9qZWN0KVxuICAgICAgOiBhd2FpdCB1cGRhdGVQcm9qZWN0KG5ld1Byb2plY3QsIHByb2plY3QuaWQpXG5cbiAgICBhd2FpdCBQcm9qZWN0cygpXG4gIH0pXG59XG4iLCJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanMhLi9wcm9qZWN0cy5zY3NzXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG52YXIgZXhwb3J0ZWQgPSBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDoge307XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydGVkOyIsIlxuZXhwb3J0IGNvbnN0IEJhc2VVcmwgPSAoKSA9PiB7XG5cbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/ICdodHRwczovL3BvcnRmb2xpby1taWNrLXNlcnZlci5oZXJva3VhcHAuY29tJyA6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnXG5cbn0iLCJpbXBvcnQgeyBCYXNlVXJsIH0gZnJvbSAnLi9CYXNlVXJsLmpzJ1xuY29uc3QgYmFzZVVybCA9IEJhc2VVcmwoKVxuXG5cblxuXG5leHBvcnQgbGV0IGdldFRlY2hub2xvZ2llcyA9IGFzeW5jICgpID0+IHtcbiAgbGV0IHJlc3VsdHMgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS90ZWNobm9sb2dpZXNgKVxuICAgIC50aGVuKChyZXMpID0+IHtcblxuICAgICAgcmV0dXJuIHJlcy5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChhbnMpID0+IHtcbiAgICAgIHJldHVybiBhbnNcbiAgICB9KVxuXG4gIHJldHVybiByZXN1bHRzXG59XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVUZWNobm9sb2d5ID0gYXN5bmMgKGJvZHksIGlkKSA9PiB7XG4gIFxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS90ZWNobm9sb2dpZXMvJHtpZH1gLCB7XG4gICAgbWV0aG9kOiBgcHV0YCxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgfSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24uanNvbigpXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9KVxuXG59XG5cbiIsImltcG9ydCB7IEJhc2VVcmwgfSBmcm9tIFwiLi9CYXNlVXJsLmpzXCJcbmNvbnN0IGJhc2VVcmwgPSBCYXNlVXJsKClcblxuZXhwb3J0IGZ1bmN0aW9uIHNldEhlYWRlcnMoaGVhZGVycykge1xuICBpZiAobG9jYWxTdG9yYWdlLmF1dGhUb2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5oZWFkZXJzLFxuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2xvY2FsU3RvcmFnZS5hdXRoVG9rZW59YCxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGhlYWRlcnNcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJIZWFkZXJzKGhlYWRlcnMpIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5oZWFkZXJzLFxuICAgIEF1dGhvcml6YXRpb246IG51bGwsXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNpZ25VcCA9IGFzeW5jIChib2R5KSA9PiB7XG4gIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGJvZHkpKVxuXG4gIGxldCByZXMgPSBhd2FpdCBmZXRjaChiYXNlVXJsICsgXCIvdXNlcnNcIiwge1xuICAgIG1ldGhvZDogXCJwb3N0XCIsXG4gICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICB9KVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICByZXR1cm4ganNvbi5qc29uKClcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImF1dGhUb2tlblwiLCBkYXRhLnRva2VuKVxuXG4gICAgICByZXR1cm4gZGF0YVxuICAgIH0pXG4gIHJldHVybiByZXNcbn1cblxuZXhwb3J0IGNvbnN0IGxvZ2luID0gYXN5bmMgKGJvZHkpID0+IHtcbiAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKGJhc2VVcmwgKyBcIi9hdXRoL2xvZ2luXCIsIHtcbiAgICBtZXRob2Q6IFwicG9zdFwiLFxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgfSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24uanNvbigpXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhdXRoVG9rZW5cIiwgZGF0YS50b2tlbilcblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9KVxuXG4gIHJldHVybiByZXNcbn1cblxuZXhwb3J0IGNvbnN0IHZlcmlmeSA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF1dGhUb2tlblwiKVxuICAvLyBjb25zb2xlLmxvZyh0b2tlbilcbiAgaWYgKHRva2VuKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYmFzZVVybCArIFwiL2F1dGgvdmVyaWZ5XCIsIHtcbiAgICAgIG1ldGhvZDogXCJnZXRcIixcbiAgICAgIGhlYWRlcnM6IHNldEhlYWRlcnMoe1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgICByZXR1cm4ganNvbi5qc29uKClcbiAgICAgIH0pXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICByZXR1cm4gZGF0YVxuICAgICAgfSlcblxuICAgIHJldHVybiByZXNcbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFVzZXIgPSBhc3luYyAoKSA9PiB7XG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF1dGhUb2tlblwiKSkge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiaGVyZVwiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF1dGhUb2tlblwiKSlcbiAgICBsZXQgdXNlciA9IGF3YWl0IHZlcmlmeSgpXG4gICAgY29uc29sZS5sb2codXNlcilcbiAgICBpZiAoIXVzZXIuZXJyb3JzKSB7XG4gICAgICAvLyBsb2dpbkJ1dHRvbi5pbm5lclRleHQgPSBcImxvZ291dFwiXG4gICAgICAvLyBsb2dnZWRJbiA9IHRydWVcbiAgICAgIHJldHVybiB1c2VyXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGxvZ2luQnV0dG9uLmlubmVyVGV4dCA9IFwibG9naW5cIlxuXG4gICAgLy8gbG9nZ2VkSW4gPSBmYWxzZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGNvbnNvbGUubG9nKGxvZ2dlZEluKVxufVxuXG5leHBvcnQgY29uc3QgbG9nb3V0ID0gYXN5bmMgKCkgPT4ge1xuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImF1dGhUb2tlblwiKVxuICBjbGVhckhlYWRlcnMoe1xuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9KVxuICByZXR1cm4gXCJsb2dnZWQgb3V0XCJcbn1cbiIsImltcG9ydCB7IEJhc2VVcmwgfSBmcm9tICcuL0Jhc2VVcmwuanMnXG5jb25zdCBiYXNlVXJsID0gQmFzZVVybCgpXG5cblxuZXhwb3J0IGxldCBnZXRQcm9qZWN0cyA9IGFzeW5jICgpID0+IHtcbiAgbGV0IHJlc3VsdHMgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS9wcm9qZWN0c2ApXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuXG4gICAgICByZXR1cm4gcmVzLmpzb24oKVxuICAgIH0pXG4gICAgLnRoZW4oKGFucykgPT4ge1xuICAgICAgcmV0dXJuIGFuc1xuICAgIH0pXG5cbiAgcmV0dXJuIHJlc3VsdHNcbn1cblxuZXhwb3J0IGxldCBnZXRQcm9qZWN0ID0gYXN5bmMgKGlkKSA9PiB7XG4gIGxldCByZXN1bHQgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS9wcm9qZWN0cy8ke2lkfWApXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuXG4gICAgICByZXR1cm4gcmVzLmpzb24oKVxuICAgIH0pXG4gICAgLnRoZW4oKGFucykgPT4ge1xuICAgICAgcmV0dXJuIGFuc1xuICAgIH0pXG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5cblxuZXhwb3J0IGNvbnN0IGFkZFByb2plY3QgPSBhc3luYyAoYm9keSkgPT4ge1xuIFxuIFxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS9wcm9qZWN0c2AsIHtcbiAgICBtZXRob2Q6IGBwb3N0YCxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgfSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24uanNvbigpXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9KVxuICBjb25zb2xlLmxvZyhyZXMpXG59XG5cblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVByb2plY3QgPSBhc3luYyAoYm9keSwgaWQpID0+IHtcbiAgXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9L3Byb2plY3RzLyR7aWR9YCwge1xuICAgIG1ldGhvZDogYHB1dGAsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gIH0pXG4gICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgIHJldHVybiBqc29uLmpzb24oKVxuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfSlcblxufVxuLy9cbmV4cG9ydCBjb25zdCBkZWxldGVQcm9qZWN0ID0gYXN5bmMgKGlkKSA9PiB7XG5cblxuXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9L3Byb2plY3RzLyR7aWR9YCwge1xuICAgIG1ldGhvZDogYGRlbGV0ZWAsXG4gICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgfSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24uanNvbigpXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9KVxuICBjb25zb2xlLmxvZyhyZXMpXG59XG5cblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVByb2plY3RUZWNobm9sb2dpZXMgPSBhc3luYyAocHJvamVjdF9pZCwgaWQpID0+IHtcbiAgY29uc29sZS5sb2coJ3VwdCcpXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9L3Byb2plY3RzLyR7cHJvamVjdF9pZH0vdGVjaG5vbG9naWVzLyR7aWR9YCwge1xuICAgIG1ldGhvZDogYHB1dGAsXG4gICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgfSlcbiAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgcmV0dXJuIGpzb24uanNvbigpXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9KVxuICBjb25zb2xlLmxvZyhyZXMpXG5cbn0iLCIvLyBpbXBvcnQgXCIuLi9TaGFyZWQvSW1hZ2VcIlxuaW1wb3J0IHsgcXMsIHFzYSwgY2VjbCwgYWMsIGJ0biB9IGZyb20gXCIuLi9IZWxwZXJzL2RvbUhlbHBlclwiXG5pbXBvcnQgeyB2ZXJpZnkgfSBmcm9tIFwiLi4vU2VydmljZXMvQXBpQXV0aC5qc1wiXG5pbXBvcnQgeyBnZXRUZWNobm9sb2dpZXMgfSBmcm9tIFwiLi4vU2VydmljZXMvQXBpVGVjaC5qc1wiXG5pbXBvcnQgeyBJbWFnZSB9IGZyb20gXCIuLi9TaGFyZWQvSW1hZ2UuanNcIlxuaW1wb3J0IHsgRm9vdGVyIH0gZnJvbSBcIi4uL0Zvb3Rlci9Gb290ZXIuanNcIlxuXG5cbmltcG9ydCB7XG4gIGdldFByb2plY3RzLFxuICBkZWxldGVQcm9qZWN0LFxuXG59IGZyb20gXCIuLi9TZXJ2aWNlcy9BcGlQcm9qZWN0LmpzXCJcbmltcG9ydCB7IEZvcm0sIElucHV0LCBCdXR0b24sIENoZWNrYm94LCBMYWJlbCB9IGZyb20gXCIuLi9TaGFyZWQvRm9ybS5qc1wiXG5pbXBvcnQgeyBFZGl0UHJvamVjdCB9IGZyb20gXCIuL0VkaXRQcm9qZWN0XCJcbmltcG9ydCBcIi4vcHJvamVjdHMuc2Nzc1wiXG5cbi8qKioqKioqKioqXG4gQ0xFQVIgUEFHRVxuKioqKioqKioqKiovXG5jb25zdCBjbGVhclBhZ2UgPSAoZWxlbWVudCkgPT4ge1xuICB3aGlsZSAoZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5sYXN0Q2hpbGQpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFByb2plY3RzKCkge1xuXG4gIGNvbnN0IG1haW5Db250ZW50ID0gcXMoJy5zY3JvbGxhYmxlLWNvbnRlbnQnKVxuICAvLyBjb25zb2xlLmxvZygnY29udGVudGEnLCBjb250ZW50YSlcbiAgLy8gbGV0IG1haW5Db250ZW50ID0gcXMoXCIubWFpbi1jb250ZW50LXNjcm9sbGFibGVcIilcbiAgY2xlYXJQYWdlKG1haW5Db250ZW50KVxuICBsZXQgbG9hZGluZyA9IG1haW5Db250ZW50LmFwcGVuZENoaWxkKGNlY2woXCJkaXZcIiwgXCJsb2FkaW5nXCIpKVxuICBsb2FkaW5nLmlubmVySFRNTCA9IFwibG9hZGluZy4uLlwiXG5cblxuICAvKioqKioqKioqKioqKipcbiAgUkVOREVSIFBST0pFQ1RTXG4gICoqKioqKioqKioqKioqKi9cbiAgY29uc3QgcmVzcCA9IGF3YWl0IGdldFByb2plY3RzKClcbiAgY2xlYXJQYWdlKG1haW5Db250ZW50KVxuXG5cbiAgY29uc3QgY29udGFpbmVyV2lkdGggPSBtYWluQ29udGVudC5jbGllbnRXaWR0aFxuICAvLyBjb25zdCBzY3JvbGxhYmxlQ29udGVudCA9IGNlY2woJ2RpdicsICdzY3JvbGxhYmxlLWNvbnRlbnQnKVxuICAvLyBtYWluQ29udGVudC5hcHBlbmRDaGlsZChzY3JvbGxhYmxlQ29udGVudClcblxuICByZXNwLmZvckVhY2goYXN5bmMgKHByb2plY3QsIGluZGV4KSA9PiB7XG5cblxuXG4gICAgY29uc3QgcHJvamVjdFdyYXAgPSBtYWluQ29udGVudC5hcHBlbmRDaGlsZChjZWNsKFwiZGl2XCIsIFwicHJvamVjdC13cmFwXCIpKVxuICAgIGNvbnN0IGltYWdlID0gcHJvamVjdFdyYXAuYXBwZW5kQ2hpbGQoXG4gICAgICBJbWFnZShgc3JjL2ltZy8ke3Byb2plY3QuaW1nX3VybH1gLCBwcm9qZWN0Lm5hbWUsIHRydWUsIHByb2plY3Quc2l0ZV91cmwsIHByb2plY3QuYnVpbGRfZGF0ZSlcbiAgICApXG4gICAgY29uc29sZS5sb2coaW1hZ2UpXG4gICAgbGV0IGJvb2wgPSBcImZhbHNlXCJcbiAgICBsZXQgbGlua01vZGFsID0gY2VjbChcImRpdlwiLCBcImxpbmstbW9kYWxcIilcblxuICAgIGxldCBpbWdXcmFwcGVyID0gcXNhKFwiLmltZy13cmFwcGVyXCIpXG4gICAgbGV0IGlubmVySW1nV3JhcCA9IHFzYShcIi5pbm5lci1pbWctd3JhcFwiKVxuICAgIGxldCB0ZWNoSWNvbnMgPSBjZWNsKFwiZGl2XCIsIFwidGVjaC1pY29uc1wiKVxuICAgIHByb2plY3QudGVjaG5vbG9naWVzLmZvckVhY2goKGljb24pID0+IHtcbiAgICAgIGxldCB0ZWNoSWNvbiA9IHRlY2hJY29ucy5hcHBlbmRDaGlsZChjZWNsKFwiaW1nXCIsIFwidGVjaC1pY29uXCIpKVxuICAgICAgdGVjaEljb24uc3JjID0gYHNyYy9pbWcvJHtpY29uLmljb25fdXJsfWBcbiAgICB9KVxuICAgIGxldCBkZXNjcmlwdGlvbiA9IGNlY2woJ2RpdicsICdkZXNjcmlwdGlvbicpXG4gICAgZGVzY3JpcHRpb24uaW5uZXJIVE1MID0gcHJvamVjdC5kZXNjcmlwdGlvblxuXG4gICAgaWYgKGNvbnRhaW5lcldpZHRoIDwgOTAwKSB7XG4gICAgICBsaW5rTW9kYWwuYXBwZW5kQ2hpbGQodGVjaEljb25zKVxuXG4gICAgICBsaW5rTW9kYWwuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pXG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICBsaW5rTW9kYWwuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pXG4gICAgICBsaW5rTW9kYWwuYXBwZW5kQ2hpbGQodGVjaEljb25zKVxuXG4gICAgfVxuXG5cblxuICAgIGxldCBsaW5rTW9kYWxJY29ucyA9IGxpbmtNb2RhbC5hcHBlbmRDaGlsZChjZWNsKCdkaXYnLCAnbGluay1tb2RhbC1pY29ucycpKVxuXG5cbiAgICBsaW5rTW9kYWxJY29ucy5pbm5lckhUTUwgPVxuICAgICAgYDxkaXY+PGEgaHJlZj0ke3Byb2plY3Quc2l0ZV91cmx9IHRhcmdldD0nX2JsYW5rJz48aSBjbGFzcz1cImZhcyBmYS1ob21lIGZhLWZ3XCI+PC9pPjwvYT5cbiAgICA8cCBjbGFzcz0naG9tZS10b29sLXRpcCc+d2Vic2l0ZTwvcD48L2Rpdj5cblxuICAgIDxkaXY+PGEgaHJlZj0ke3Byb2plY3QuZ2l0aHViX3VybH0gdGFyZ2V0PSdfYmxhbmsnPjxpIGNsYXNzPVwiZmFiIGZhLWdpdGh1YlwiPjwvaT48L2E+XG4gICAgPHAgY2xhc3M9J2dpdGh1Yi10b29sLXRpcCc+Z2l0aHViPC9wPjwvZGl2PmBcblxuXG4gICAgY29uc29sZS5sb2coaW5uZXJJbWdXcmFwWzBdLmNoaWxkcmVuWzFdKVxuXG5cblxuXG5cblxuICAgIC8qKioqKioqKioqKioqKlxuICAgIEFERCBMSU5LIE1PREFMXG4gICAgKioqKioqKioqKioqKioqL1xuICAgIGltZ1dyYXBwZXJbaW5kZXhdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoYm9vbCA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgYm9vbCA9IFwiZmFsc2VcIlxuICAgICAgICBpbm5lckltZ1dyYXBbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJjbG9zZS1jdXJ0YWluXCIpXG4gICAgICAgIGlubmVySW1nV3JhcFtpbmRleF0uY2xhc3NMaXN0LnJlbW92ZShcIm9wZW4tY3VydGFpblwiKVxuICAgICAgICBpbWdXcmFwcGVyW2luZGV4XS5sYXN0Q2hpbGQucmVtb3ZlKClcblxuXG4gICAgICAgIGltZ1dyYXBwZXJbaW5kZXhdLnN0eWxlLndpZHRoID0gJzgwJSdcbiAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uc3R5bGUucGFkZGluZyA9ICc2JSdcbiAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uc3R5bGUubWFyZ2luID0gJzAnXG5cbiAgICAgICAgcHJvamVjdFdyYXAuc3R5bGUubWFyZ2luID0gJzAgMTAlIDMlIDEwJSdcbiAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5zdHlsZS53aWR0aCA9ICcxMDAlJ1xuXG4gICAgICAgIHByb2plY3RXcmFwLmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9qZWN0LXdyYXAtY2xpY2tcIilcblxuICAgICAgICBpbWFnZS5sYXN0Q2hpbGQucmVtb3ZlKClcblxuICAgICAgICAvLyBpbm5lckltZ1dyYXBbaW5kZXhdLnN0eWxlLmhlaWdodCA9ICcxMDAlJ1xuXG4gICAgICB9IGVsc2UgaWYgKGJvb2wgPT09IFwiZmFsc2VcIikge1xuICAgICAgICBjb25zb2xlLmxvZyhib29sKVxuICAgICAgICBib29sID0gXCJ0cnVlXCJcbiAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5jbGFzc0xpc3QuYWRkKFwib3Blbi1jdXJ0YWluXCIpXG4gICAgICAgIGlubmVySW1nV3JhcFtpbmRleF0uY2xhc3NMaXN0LnJlbW92ZShcImNsb3NlLWN1cnRhaW5cIilcbiAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uYXBwZW5kQ2hpbGQobGlua01vZGFsKVxuXG5cbiAgICAgICAgaWYgKGNvbnRhaW5lcldpZHRoIDwgOTAwKSB7XG4gICAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nXG4gICAgICAgICAgbGlua01vZGFsLnN0eWxlLndpZHRoID0gJzkwJSdcbiAgICAgICAgICB0ZWNoSWNvbnMuc3R5bGUud2lkdGggPSAnODAlJ1xuICAgICAgICAgIGxpbmtNb2RhbC5zdHlsZS5tYXJnaW5Ub3AgPSAnNSUnXG4gICAgICAgICAgbGlua01vZGFsLnN0eWxlLmJhY2tncm91bmQgPSAncmdiKDI0MCwgMjUzLCAyNTMpJ1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uc3R5bGUud2lkdGggPSAnOTAlJ1xuICAgICAgICAgIGltZ1dyYXBwZXJbaW5kZXhdLnN0eWxlLnBhZGRpbmcgPSAnMiUnXG4gICAgICAgICAgaW1nV3JhcHBlcltpbmRleF0uc3R5bGUubWFyZ2luID0gJzAgYXV0bydcbiAgICAgICAgICBwcm9qZWN0V3JhcC5zdHlsZS5tYXJnaW4gPSAnMCAxJSdcblxuICAgICAgICAgIGlubmVySW1nV3JhcFtpbmRleF0uc3R5bGUud2lkdGggPSAnOTklJ1xuICAgICAgICAgIGlubmVySW1nV3JhcFtpbmRleF0uc3R5bGUuaGVpZ2h0ID0gJzk5JSdcbiAgICAgICAgICAvLyBcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYgKGNvbnRhaW5lcldpZHRoIDwgOTAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJzkwMC0nKVxuICAgICAgICAgIGltYWdlLmFwcGVuZENoaWxkKHRlY2hJY29ucylcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnOTAwKycpXG4gICAgICAgICAgaW5uZXJJbWdXcmFwW2luZGV4XS5hcHBlbmRDaGlsZCh0ZWNoSWNvbnMpXG5cbiAgICAgICAgfVxuXG5cblxuICAgICAgICBjb25zb2xlLmxvZyhpbWFnZSlcblxuICAgICAgICBsZXQgaXcgPSBpbWdXcmFwcGVyW2luZGV4XS5zdHlsZVxuICAgICAgICBpdy5zZXRQcm9wZXJ0eShcbiAgICAgICAgICBcIi0tYW5pbWF0aW9uXCIsXG4gICAgICAgICAgXCJhbmltYXRlLWltZy13cmFwcGVyIDEuNXMgbGluZWFyIGZvcndhcmRzXCJcbiAgICAgICAgKVxuICAgICAgICBwcm9qZWN0V3JhcC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC13cmFwLWNsaWNrXCIpXG5cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKipcbiAgICAgRURJVCBQUk9KRUNUIEJVVFRPTlxuICAgICoqKioqKioqKioqKioqKioqKioqL1xuICAgIGlmIChhd2FpdCB2ZXJpZnkoKSkge1xuICAgICAgY29uc3QgZWRpdFByb2plY3RXcmFwcGVyID0gY2VjbChcImRpdlwiLCBcImVkaXQtcHJvamVjdC13cmFwcGVyXCIpXG4gICAgICBjb25zdCBlZGl0QnV0dG9uID0gQnV0dG9uKFwic2hvdy1lZGl0LWJ1dHRvblwiLCBcInN1Ym1pdFwiLCBcInVwZGF0ZVwiKVxuICAgICAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0V3JhcC5sYXN0Q2hpbGQuY2xhc3NOYW1lKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgcHJvamVjdFdyYXAubGFzdENoaWxkLmNsYXNzTmFtZSAhPT0gXCJlZGl0LXByb2plY3QtZm9ybVwiXG4gICAgICAgIClcbiAgICAgICAgICBFZGl0UHJvamVjdChwcm9qZWN0V3JhcCwgcHJvamVjdClcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcHJvamVjdFdyYXAubGFzdENoaWxkLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBlZGl0UHJvamVjdFdyYXBwZXIuYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbilcblxuICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgIERFTEVURSBQUk9KRUNUIEJVVFRPTlxuICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gQnV0dG9uKFwiZGVsZXRlLXByb2plY3RcIiwgXCJzdWJtaXRcIiwgXCJkZWxldGVcIilcbiAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgYW5zd2VyID0gY29uZmlybShgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSAke3Byb2plY3QubmFtZX0/YClcbiAgICAgICAgYW5zd2VyICYmIGF3YWl0IGRlbGV0ZVByb2plY3QocHJvamVjdC5pZClcbiAgICAgICAgYW5zd2VyICYmIGF3YWl0IFByb2plY3RzKClcbiAgICAgIH0pXG4gICAgICBlZGl0UHJvamVjdFdyYXBwZXIuYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uKVxuXG4gICAgICBwcm9qZWN0V3JhcC5hcHBlbmRDaGlsZChlZGl0UHJvamVjdFdyYXBwZXIpXG4gICAgfVxuICB9KVxuXG4gIC8qKioqKioqKioqKlxuICBBREQgUFJPSkVDVCBcbiAgKioqKioqKioqKioqL1xuICBpZiAoYXdhaXQgdmVyaWZ5KCkpIHtcblxuICAgIGxldCBhZGRCdG4gPSBCdXR0b24oXCJzaG93LWFkZC1mb3JtXCIsIFwic3VibWl0XCIsIFwiYWRkIHByb2plY3RcIilcbiAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKG1haW5Db250ZW50Lmxhc3RDaGlsZC5wcmV2aW91c1NpYmxpbmcuY2xhc3NOYW1lKVxuICAgICAgaWYgKG1haW5Db250ZW50Lmxhc3RDaGlsZC5wcmV2aW91c1NpYmxpbmcuY2xhc3NOYW1lID09PSBcInNob3ctYWRkLWZvcm1cIilcbiAgICAgICAgRWRpdFByb2plY3QobWFpbkNvbnRlbnQsIHJlc3BbMF0sIFwiYWRkUHJvamVjdFwiKVxuICAgICAgZWxzZSB7XG4gICAgICAgIG1haW5Db250ZW50Lmxhc3RDaGlsZC5yZW1vdmUoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBhYyhtYWluQ29udGVudCwgYWRkQnRuKVxuICB9XG5cbiAgLy8gLy9kb3duIGJ1dHRvblxuXG4gIC8vIGNvbnN0IHNlZU1vcmVCdG4gPSBCdXR0b24oJ3NlZS1tb3JlLWJ0bicsICdzdWJtaXQnLCAnc2VlIG1vcmUnKVxuXG4gIC8vIGFjKG1haW5Db250ZW50LCBzZWVNb3JlQnRuKVxuXG4gIG1haW5Db250ZW50LmFwcGVuZENoaWxkKEZvb3RlcigpKVxuXG5cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=